---
title: "Изучение различных подходов к построению кривых отклика при моделировании комплекса маркетинга | На пути к науке о данных"
date: "2025-11-19T23:13:09+0000"
draft: false
description: ""
h1: "Изучение различных подходов к построению кривых отклика при моделировании комплекса маркетинга"
urldel: "https://towardsdatascience.com/exploring-different-approaches-to-generate-response-curves-in-marketing-mix-modeling-ff6dcc7927f7/"
---

### Кривые отклика

Кривые отклика — важный компонент моделирования маркетингового микса, который представляет собой статистический метод, используемый для анализа влияния различных маркетинговых стратегий и тактик на продажи или другие бизнес-показатели. Кривые отклика отражают взаимосвязь между маркетинговой переменной (например, расходами на рекламу, ценой, продвижением и т. д.) и продажами или доходом, генерируемым продуктом или услугой.

Важность кривых отклика заключается в их способности показывать эффективность каждой маркетинговой переменной и её вклад в общий отклик. Анализируя кривые отклика, маркетологи могут получить ценную информацию о том, какие маркетинговые тактики способствуют наибольшим продажам, а какие не приносят желаемых результатов.

Существуют различные подходы к построению кривых отклика, и в этой статье я рассматриваю два известных метода: прямой подход с использованием функций насыщения и подход, основанный на частичной зависимости. Я оцениваю эти подходы, используя две разные группы алгоритмов: линейную регрессию и градиентный бустинг. Более того, я показываю, что подход частичной зависимости можно использовать в сочетании с кривыми отклика, полученными с помощью значений SHAP при использовании сложных алгоритмов машинного обучения.

#### Функции насыщения / преобразования

Прямой подход к построению кривых отклика включает использование функций насыщения (преобразований), таких как логистическая, отрицательная экспоненциальная или Хилла. Функция насыщения — это математическая функция, которая отражает эффект убывающей доходности, когда влияние маркетинговой переменной насыщается по мере увеличения её значения. Используя функцию насыщения, взаимосвязь между маркетинговой переменной и переменной отклика можно преобразовать в нелинейную форму. Это позволяет модели фиксировать эффект насыщения и более точно представлять истинную взаимосвязь между маркетинговыми усилиями и откликом (продажами или доходом).

**Моделирование маркетингового микса с помощью PyMC3**

Одним из преимуществ использования преобразования насыщения является его простота и интерпретируемость. Кривая отклика определяется математической функцией с фиксированными параметрами, что приводит к гладкой кривой, которую можно легко визуализировать. Однако выбор функции насыщения является важным фактором, который необходимо учитывать до моделирования. Разные функции могут давать разные результаты, и выбор должен основываться на характеристиках данных и основных предположениях модели.

#### Линейная регрессия и необходимость нелинейности

В моделировании маркетингового микса линейная регрессия — это часто используемый метод для анализа взаимосвязи между маркетинговыми переменными и переменной отклика. Однако линейная регрессия предполагает линейную взаимосвязь между переменными-предикторами и переменной отклика. Это может стать ограничением при попытке зафиксировать нелинейные взаимосвязи, которые часто встречаются в маркетинговых данных.

Чтобы преодолеть это ограничение и ввести нелинейность в процесс моделирования, необходимо применить функцию насыщения или преобразование к маркетинговым переменным. Это преобразование позволяет создать нелинейную взаимосвязь, которая в противном случае была бы линейной из-за природы линейной регрессии.

**Моделирование маркетингового микса с помощью сглаживающих сплайнов**

#### Подход частичной зависимости

Подход частичной зависимости — это более общий метод, который можно использовать для моделирования взаимосвязи между любой маркетинговой переменной и откликом. Этот подход включает в себя изоляцию влияния одной переменной при сохранении всех остальных переменных постоянными. Изменяя значение интересующей маркетинговой переменной и наблюдая за соответствующим откликом, можно создать график частичной зависимости.

В отличие от гладкой кривой отклика, полученной с помощью функций насыщения, график, полученный с помощью подхода частичной зависимости, может быть не обязательно гладким. Его форма зависит от используемого алгоритма моделирования и взаимосвязи между медиапеременной и откликом. Подход частичной зависимости может быть полезен, когда взаимосвязь сложна и нелинейна, и его можно применять в случаях, когда явно используется преобразование насыщения или когда алгоритмы естественным образом обрабатывают нелинейность без необходимости дополнительного преобразования насыщения.

**Улучшение моделирования маркетингового микса с помощью подходов машинного обучения**

#### Данные

Я продолжаю использовать набор данных, предоставленный Robyn под лицензией MIT, как в моих предыдущих статьях, для практических примеров, и следую тем же шагам подготовки данных, применяя Prophet для разложения тенденций, сезонности и праздников.

Набор данных состоит из 208 недель выручки (с 2015–11–23 по 2019–11–11) и включает:

* 5 каналов расходов на медиа: **tv_S, ooh_S, print_S, VK_S, search_S**
* 2 медиаканала, которые также имеют информацию об экспозиции (Impression, Clicks): VK_I, search_clicks_P (не используются в этой статье)
* Органические медиа без расходов: **newsletter**
* Контрольные переменные: **events, holidays**, продажи конкурентов (**competitor_sales_B**)

#### Моделирование

Я построил полный рабочий конвейер MMM, который можно применить в реальных сценариях для анализа расходов на медиа по переменной отклика, состоящий из следующих компонентов:

**Примечание о коэффициентах**

В scikit-learn Ridge Regression не предоставляет встроенной опции для принудительного установления положительных коэффициентов для подмножества переменных. Однако потенциальный обходной путь включает отклонение решения optuna, если обнаруживается, что какие-либо из коэффициентов медиа оказываются отрицательными. Этого можно добиться, возвращая исключительно большое значение, сигнализирующее о том, что отрицательные коэффициенты неприемлемы и должны быть исключены из модели. Альтернативным подходом может быть обращение к моей статье о том, как обернуть R glmnet в Python, что позволяет ограничить коэффициенты для подмножества переменных.

Для регрессии Риджа я применяю преобразование насыщения и генерирую кривые отклика, используя как функцию насыщения, так и подход частичной зависимости. С помощью LightGBM я позволяю модели естественным образом фиксировать нелинейности и генерировать кривые отклика с помощью подхода частичной зависимости. Кроме того, я накладываю значения SHAP на кривую отклика, чтобы получить дополнительную информацию.

#### Результаты

**Ридж-регрессия с преобразованием насыщения**

Как можно заметить, обе кривые отклика, сгенерированные с использованием функции насыщения и частичной зависимости, демонстрируют перекрывающиеся закономерности, что указывает на то, что два метода фиксируют схожие взаимосвязи между маркетинговой переменной и откликом.

**LightGBM**

Как упоминалось ранее, результирующая кривая отклика, сгенерированная с помощью частичной зависимости, не обязательно может быть гладкой. Одна из причин этого может быть связана с природой алгоритмов градиентного бустинга, которые включают разделение пространства признаков на регионы и учёт взаимодействий между несколькими решающими деревьями.

#### Заключение

Кривые отклика играют решающую роль в моделировании маркетингового микса, предоставляя информацию об эффективности различных маркетинговых переменных и их вкладе в общий отклик. В этой статье я рассмотрел два известных метода построения кривых отклика: прямой подход с использованием функций насыщения и подход, основанный на частичной зависимости. Я оценил эти подходы, используя две группы алгоритмов: линейную регрессию и градиентный бустинг, и продемонстрировал контрастные способы, которыми разные алгоритмы фиксируют нелинейный отклик. Кроме того, я сравнил отклики, сгенерированные с помощью значений SHAP, с результатами, полученными с помощью подхода частичной зависимости.

Полный код можно скачать из моего репозитория на Github.

Спасибо за чтение!

