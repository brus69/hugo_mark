<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>  
    Создание системы мониторинга, которая действительно Работает | На пути к науке о данных
     | P9X
  </title>
  <meta name="description" content="">
<meta name="yandex-verification" content="242f5a0ee52d5836" />
<meta name="google-site-verification" content="0Ytq4iozDTscUw8IMVUsSsLQ4yEXHRwKZSvFYqnSNtE" />
<link rel="canonical" href="http://localhost:1313/building-a-monitoring-system-that-actually-works/" />

<link rel="icon" type="image/x-icon" href="http://localhost:1313/favicon.ico">

  
 <style>
  .content h1 { 
        font-size: 1.875rem; 
        font-weight: bold; 
        margin-bottom: 1rem; 
    }
    .content h2 { 
        font-size: 1.5rem; 
        font-weight: 600; 
        margin-bottom: 0.75rem; 
    }
    .content h3 { 
        font-size: 1.25rem; 
        font-weight: 500; 
        margin-bottom: 0.5rem; 
    }
    .content p { 
        margin-bottom: 1rem; 
    }
    .content ul { 
        list-style-type: disc; 
        list-style-position: inside; 
        margin-bottom: 1rem; 
    }
    .content ol { 
        list-style-type: decimal; 
        list-style-position: inside; 
        margin-bottom: 1rem; 
    }
    .content a { 
        color: #2563eb; 
    }
    .content a:hover { 
        color: #1e40af; 
    }
    .content blockquote { 
        border-left: 4px solid #d1d5db; 
        padding-left: 1rem; 
        font-style: italic; 
    }

    
.content table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
    font-size: 0.875rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    border-radius: 0.5rem;
    overflow: hidden;
    border: 1px solid #e5e7eb;
}

.dark-mode .content table {
    border: 1px solid #4b5563;
}

.content thead {
    background-color: #eaebec;
}

.dark-mode .content thead {
    background-color: #374151;
}

.content th {
    padding: 0.75rem 1rem;
    text-align: left;
    font-weight: 600;
    color: #374151;
    border-bottom: 1px solid #e5e7eb;
    border-right: 1px solid #e5e7eb;  
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.dark-mode .content th {
    color: #f9fafb;
    border-bottom: 1px solid #4b5563;
    border-right: 1px solid #4b5563;  
}

.content th:last-child {
    border-right: none;  
}

.content td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #e5e7eb;
    border-right: 1px solid #e5e7eb;  
    color: #6b7280;
}

.dark-mode .content td {
    color: #d1d5db;
    border-bottom: 1px solid #4b5563;
    border-right: 1px solid #4b5563;  
}

.content td:last-child {
    border-right: none;  
}

.content tbody tr {
    transition: background-color 0.15s ease-in-out;
}

.content tbody tr:hover {
    background-color: #f9fafb;
}

.dark-mode .content tbody tr:hover {
    background-color: #374151;
}

.content tbody tr:last-child td {
    border-bottom: none;
}

 
.content tbody tr:nth-child(even) {
    background-color: #f4f5f7;
}

.dark-mode .content tbody tr:nth-child(even) {
    background-color: #1f2937;
}

.dark-mode .content tbody tr:nth-child(even):hover {
    background-color: #374151;
}

 
.content code:not(pre code) {
    background-color: #f3f4f6;
    color: #dc2626;
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
    font-weight: 500;
    border: 1px solid #e5e7eb;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
}

.dark-mode .content code:not(pre code) {
    background-color: #224464;
    color: #f87171;
    border: 1px solid #4b5563;
}

 
.content pre {
    background-color: #224464;
    color: #f9fafb;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1.5rem 0;
    border: 1px solid #374151;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
    font-size: 0.875rem;
    line-height: 1.5;
}

.dark-mode .content pre {
    background-color: #111827;
    border: 1px solid #374151;
}

 
.content pre code {
    background: none;
    color: inherit;
    padding: 0;
    border: none;
    font-size: inherit;
    font-weight: normal;
}

 
.content pre code .keyword { color: #f472b6; }  
.content pre code .function { color: #60a5fa; }  
.content pre code .string { color: #34d399; }  
.content pre code .comment { color: #9ca3af; font-style: italic; }  
.content pre code .number { color: #fbbf24; }  
.content pre code .class { color: #c084fc; }  
.content pre code .operator { color: #93c5fd; }  

 
.content pre::-webkit-scrollbar {
    height: 6px;
}

.content pre::-webkit-scrollbar-track {
    background: #374151;
    border-radius: 0 0 0.5rem 0.5rem;
}

.content pre::-webkit-scrollbar-thumb {
    background: #6b7280;
    border-radius: 3px;
}

.content pre::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

 
.content h1 code:not(pre code),
.content h2 code:not(pre code),
.content h3 code:not(pre code) {
    font-size: 0.9em;
    background-color: #fef2f2;
    color: #dc2626;
}

.dark-mode .content h1 code:not(pre code),
.dark-mode .content h2 code:not(pre code),
.dark-mode .content h3 code:not(pre code) {
    background-color: #7f1d1d;
    color: #fca5a5;
}

 
.content a code:not(pre code) {
    color: inherit;
    background-color: rgba(59, 130, 246, 0.1);
}

.dark-mode .content a code:not(pre code) {
    background-color: rgba(96, 165, 250, 0.2);
}
        :root {
            --color-bg: #1a1a1a;
            --color-text: #e6e6e6;
            --color-accent: #6b7280;
            --color-link: #9ca3af;
            --color-link-hover: #d1d5db;
        }
        
        .light-mode {
            --color-bg: #f9fafb;
            --color-text: #1f2937;
            --color-accent: #6b7280;
            --color-link: #4b5563;
            --color-link-hover: #111827;
        }
        
        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        a:hover {
            color: var(--color-link-hover);
        }
        
        .sidebar {
            position: fixed;
             
            height: 100vh;
            overflow-y: auto;
            
        }
        
        .main-content {
            margin-left: 350px;
            
             
        }
        
        .toc-container {
            position: fixed;
            right: 2rem;
            top: 2rem;
            width: 250px;
            display: none;
        }
        
        @media (min-width: 1280px) {
            .toc-container {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 50;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                 
            }
            
            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 100;
            }
        }
        
        .toc-link.active {
            color: var(--color-link-hover);
            font-weight: bold;
        }
        
        .social-icons a {
            margin-right: 0.5rem;
        }
        
        pre {
            background-color: rgba(107, 114, 128, 0.1);
            padding: 1rem;
            border-radius: 0.25rem;
            overflow-x: auto;
        }
        
        code {
            font-family: Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
   <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: {
                50: '#eff6ff',
                100: '#dbeafe',
                500: '#0ea5e9',
                600: '#0284c7',
              },
            },
            boxShadow: {
              soft: '0 8px 24px rgba(2, 132, 199, 0.08)'
            }
          },
        },
      }
    </script>
</head>
  <body class="light-mode">
      <header>
    
  </header>
    
    <button class="mobile-menu-btn p-2 bg-gray-800 text-white rounded md:hidden">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
    </button>

    
    <aside class="sidebar border-r-4 border-sky-800  min-w-[350px] py-12 px-10 bg-gradient-to-br from-cyan-200 via-green-100 to-sky-100">
        <div class="flex flex-col items-center mb-8">
                
            
            <div class="w-24 h-24 mb-4 relative">
                <a href="/">
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 viewBox="0 0 550.000000 385.000000"
 preserveAspectRatio="xMidYMid meet">

<g transform="translate(0.000000,385.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M2780 3000 l0 -300 40 0 40 0 0 260 0 260 1165 0 1165 0 0 -1245 0
-1245 -1165 0 -1165 0 0 260 0 260 -40 0 -40 0 0 -300 0 -300 1245 0 1245 0 0
1325 0 1325 -1245 0 -1245 0 0 -300z"/>
<path d="M700 1975 l0 -635 145 0 145 0 0 245 0 245 383 0 c422 0 426 1 491
66 60 60 66 88 66 319 0 190 -2 214 -21 255 -25 56 -53 86 -104 113 -39 22
-49 22 -572 25 l-533 3 0 -636z m940 245 l0 -100 -325 0 -325 0 0 100 0 100
325 0 325 0 0 -100z"/>
<path d="M2320 2601 c-69 -22 -112 -58 -146 -121 -17 -31 -19 -60 -19 -260 0
-211 1 -227 22 -265 27 -51 68 -90 115 -109 32 -14 98 -16 438 -16 l400 0 0
-245 0 -245 145 0 145 0 0 536 c0 373 -3 548 -11 575 -16 50 -61 105 -112 132
-41 22 -48 22 -497 24 -250 1 -466 -2 -480 -6z m810 -381 l0 -100 -340 0 -340
0 0 100 0 100 340 0 340 0 0 -100z"/>
<path d="M3650 2607 c0 -1 99 -144 219 -317 l219 -314 -63 -91 c-34 -49 -133
-191 -219 -315 l-157 -225 172 -3 c97 -1 176 2 183 7 6 5 72 97 146 205 74
107 138 196 141 196 4 0 71 -92 149 -205 l143 -205 173 0 c96 0 174 2 174 4 0
3 -95 141 -211 308 -116 167 -214 308 -216 315 -3 7 92 151 211 322 119 170
216 312 216 315 0 3 -78 6 -174 6 l-174 0 -143 -205 c-78 -113 -145 -205 -149
-205 -3 0 -70 92 -148 205 l-143 205 -174 0 c-96 0 -175 -1 -175 -3z"/>
</g>
</svg>
</a>
            </div>

            <p class="text-xs text-center text-gray-500 max-w-[200px]">
                Профессиональное агентство контекстной рекламы с опытом более 18 лет.

            </p>
        </div>

        
        <nav class="mb-8">
          
        
            
  <nav>
    <ul>
    <li class="text-lg font-semibold">
      <a href="/">Контекстная реклама</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/analytics/">web-аналитика</a>
    </li>
    <li class="text-lg font-semibold">
      <a aria-current="true" class="ancestor" href="/posts/">Блог</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/about/">О нас</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/tags/">Категории</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/job/">Вакансии</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/tags/case/">Кейсы</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/calculators/">Калькуляторы</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/contacts/">Контакты</a>
    </li>
    </ul>
  </nav>

           

        </nav>

        
        <div class="social-icons  mt-auto">
<div>

<a href="https://t.me/your_link" target="_blank" class="inline-flex 
items-center justify-center px-3 py-3 text-white bg-[#2AABEE] font-medium text-sm rounded 
shadow-md hover:bg-[#279fd9] 
hover:shadow-lg focus:bg-[#2493c8] 
focus:shadow-lg focus:outline-none 
focus:ring-0 active:bg-[#2185b3] active:shadow-lg transition duration-150 ease-in-out">
  
     
<svg width="25px" height="25px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" 
fill="#fff" class="bi bi-telegram pr-1">
  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"/>
</svg>
                            
  
  Открыть в Telegram
</a>

</div>
            <div class="pt-6 flex gap-1 justify-left items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                sale@p9x.ru
            </div>
        </div>
        
        
        <div class="mt-8 pt-4 text-xs text-gray-500 border-t border-gray-700">
            <p>Powered by <a href="#" class="hover:underline">Hugo</a> | Themed with <a href="#" class="hover:underline">poison</a></p>
            <p>© 2010 - 2025 Poison. All rights reserved.</p>
        </div>
    </aside>

  <main class="main-content">
 
            
            
   <div class="max-w-[1100px]">
    
    <section class="bg-white border border-gray-200  shadow-sm overflow-hidden">
      
      <div class="bg-gradient-to-b from-sky-50/60 to-transparent p-6 border-b border-gray-200">
        <h1 class="text-2xl md:text-3xl font-bold">Создание системы мониторинга, которая на самом деле Работает</h1>
        <time class="block mt-2 text-gray-500" datetime="2025-11-19T23:13:09+00:00">
          
    
    November 19, 2025
        </time>

              
        <div class="not-prose backdrop-blur-sm pt-4">
          <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
            <div class="flex items-center gap-3">
              
                <img src="/user_02.png" class="h-20 w-20 rounded-full hue-rotate-270" alt="">
              
              <div>
                <p class="text-gray-800 font-medium">Автор: Дмитрий Иванов [Команда P9X]</p>
                <p class="text-gray-600 text-sm">~8 минут чтения</p>
              </div>
            </div>
            <div class="text-sm text-gray-600">
                <div class="tags mt-8">
      

    </div>
            </div>
          </div>
        </div>

      </div>

      
      <article class="px-6 py-6 max-w-[94ch] content">
  

        


        
     
           <h3 id="управление-продуктами-важность-мониторинга-ключевых-показателей-эффективности-kpi">Управление продуктами: важность мониторинга ключевых показателей эффективности (KPI)</h3>
<p>Управление продуктами предполагает необходимость обеспечения их надлежащей работы и бесперебойной работы всех процессов. Обычно для оценки состояния продуктов мы полагаемся на показатели. На показатели могут влиять различные факторы: внутренние изменения, такие как обновления пользовательского интерфейса, корректировка цен или инциденты, а также внешние факторы, например, действия конкурентов или сезонные тенденции. Поэтому важно постоянно отслеживать ключевые показатели эффективности (KPI), чтобы быстро реагировать, когда что-то идёт не по плану. В противном случае может потребоваться несколько недель, чтобы понять, что продукт был полностью неработоспособен для 5% клиентов или что конверсия снизилась на 10 процентных пунктов после последнего релиза.</p>
<h4 id="создание-информационных-панелей">Создание информационных панелей</h4>
<p>Чтобы получить наглядное представление, мы создаём информационные панели с ключевыми показателями. Но давайте будем честными: информационные панели, за которыми никто активно не следит, мало полезны. Нам нужны либо люди, постоянно отслеживающие десятки или даже сотни показателей, либо автоматизированная система оповещения и мониторинга. И я решительно предпочитаю второе.</p>
<p>В этой статье я расскажу вам о практическом подходе к созданию эффективной системы мониторинга ваших KPI. Вы узнаете о различных подходах к мониторингу, о том, как создать свою первую систему статистического мониторинга, и о проблемах, с которыми вы, вероятно, столкнётесь при её внедрении в производство.</p>
<h3 id="настройка-мониторинга">Настройка мониторинга</h3>
<p>Давайте начнём с общей картины того, как спроектировать вашу систему мониторинга, а затем углубимся в технические детали. При настройке мониторинга необходимо принять несколько ключевых решений:</p>
<ul>
<li><strong>Чувствительность.</strong> Вам нужно найти баланс между пропуском важных аномалий (ложные отрицания) и получением ложных оповещений по 100 раз в день (ложные срабатывания).</li>
<li><strong>Размеры.</strong> Сегменты, которые вы выберете для мониторинга, также влияют на вашу чувствительность. Если проблема возникнет в небольшом сегменте (например, в определённом браузере или стране), ваша система с большей вероятностью обнаружит её, если вы будете отслеживать метрики этого сегмента напрямую. Но здесь есть загвоздка: чем больше сегментов вы отслеживаете, тем больше ложных срабатываний вы будете получать, поэтому вам нужно найти золотую середину.</li>
<li><strong>Временная детализация.</strong> Если у вас достаточно данных и вы не можете позволить себе задержек, возможно, стоит рассмотреть возможность просмотра данных поминутно. Если у вас недостаточно данных, вы можете объединить их в пакеты по 5–15 минут и отслеживать их вместо этого. В любом случае всегда полезно иметь более высокий уровень ежедневного, еженедельного или ежемесячного мониторинга наряду с мониторингом в реальном времени, чтобы отслеживать долгосрочные тенденции.</li>
</ul>
<h4 id="процессы-мониторинга">Процессы мониторинга</h4>
<p>Мониторинг — это не только техническое решение. Это также касается процессов, которые у вас есть:</p>
<ul>
<li><strong>Вам нужен человек, который будет отвечать за мониторинг и реагирование на оповещения.</strong> Раньше мы справлялись с этим с помощью ротации дежурных в моей команде, где каждую неделю один человек отвечал за просмотр всех оповещений.</li>
<li><strong>Помимо автоматического мониторинга, стоит также проводить ручные проверки.</strong> Вы можете настроить дисплеи в офисе или, по крайней мере, иметь процесс, при котором кто-то (например, дежурный) просматривает показатели раз в день или неделю.</li>
<li><strong>Вам необходимо установить обратную связь.</strong> Когда вы просматриваете оповещения и оглядываетесь на инциденты, которые могли пропустить, найдите время, чтобы настроить параметры вашей системы мониторинга.</li>
<li><strong>Ценность журнала изменений (записи обо всех изменениях, влияющих на ваши KPI) невозможно переоценить.</strong> Это помогает вам и вашей команде всегда иметь контекст о том, что произошло с вашими KPI и когда. Кроме того, это даёт вам ценный набор данных для оценки реального воздействия на вашу систему мониторинга при внесении изменений (например, выяснение того, какой процент прошлых аномалий ваша новая система действительно могла бы обнаружить).</li>
</ul>
<h3 id="фреймворки-для-мониторинга">Фреймворки для мониторинга</h3>
<p>Существует множество готовых фреймворков, которые можно использовать для мониторинга. Я бы разделил их на две основные группы.</p>
<p>Первая группа включает в себя создание прогноза с доверительными интервалами. Вот некоторые варианты:</p>
<ul>
<li>Вы можете использовать <strong>statsmodels</strong> и классическую реализацию моделей ARIMA для прогнозирования временных рядов.</li>
<li>Другой вариант, который обычно хорошо работает из коробки, — <strong>Prophet</strong> от VK. Это простая аддитивная модель, которая возвращает интервалы неопределённости.</li>
<li>Существует также <strong>GluonTS</strong>, фреймворк для прогнозирования на основе глубокого обучения от AWS.</li>
</ul>
<p>Вторая группа фокусируется на обнаружении аномалий, и вот несколько популярных библиотек:</p>
<ul>
<li><strong>PyOD</strong>: самый популярный инструмент для обнаружения выбросов/аномалий на Python с более чем 50 алгоритмами (включая методы временных рядов и глубокого обучения).</li>
<li><strong>ADTK (Anomaly Detection Toolkit)</strong>: создан для неконтролируемого/основанного на правилах обнаружения аномалий временных рядов с простой интеграцией в pandas dataframes.</li>
<li><strong>Merlion</strong>: сочетает прогнозирование и обнаружение аномалий для временных рядов, используя как классические, так и ML-подходы.</li>
</ul>
<h3 id="статистический-подход-к-мониторингу">Статистический подход к мониторингу</h3>
<p>Основная идея мониторинга проста: используйте исторические данные для построения доверительного интервала (CI) и обнаружения, когда текущие показатели выходят за рамки ожидаемого поведения. Мы оцениваем этот доверительный интервал, используя среднее значение и стандартное отклонение прошлых данных. Это базовая статистика.</p>
<h3 id="пример-мониторинг-количества-поездок-на-такси">Пример: мониторинг количества поездок на такси</h3>
<p>Для проверки этого мы будем использовать популярный набор данных NYC Taxi Data. Я загрузил данные за май — июль 2025 года и сосредоточился на поездках, связанных с высокообъёмными автомобилями, работающими по найму. Поскольку у нас сотни поездок каждую минуту, мы можем использовать поминутные данные для мониторинга.</p>
<h4 id="построение-первой-версии">Построение первой версии</h4>
<p>Итак, давайте попробуем наш подход и построим доверительные интервалы на основе реальных данных. Я начал с набора ключевых параметров по умолчанию:</p>
<ul>
<li>Временное окно ±15 минут вокруг текущей метки времени.</li>
<li>Данные за текущий день плюс тот же день недели за предыдущие три недели.</li>
<li>Доверительный интервал, определённый как ±3 стандартных отклонения.</li>
</ul>
<p>Теперь давайте создадим пару функций с бизнес-логикой для расчёта доверительного интервала и проверки того, выходит ли наше значение за его пределы.</p>
<h4 id="анализ-результатов">Анализ результатов</h4>
<p>Давайте посмотрим на результаты. Сначала мы видим довольно много ложных положительных срабатываний (однократные точки за пределами CI, которые, по-видимому, обусловлены нормальной изменчивостью).</p>
<p>Существуют два способа настройки нашего алгоритма для учёта этого:</p>
<ul>
<li>Доверительный интервал не обязательно должен быть симметричным. Мы можем использовать более высокий коэффициент для верхней границы (например, использовать 5 вместо 3).</li>
<li>Данные довольно волатильны, поэтому будут случайные аномалии, когда одна точка выходит за пределы доверительного интервала. Чтобы уменьшить количество ложных положительных оповещений, мы можем использовать более надёжную логику и запускать оповещение только тогда, когда несколько точек выходят за пределы CI (например, по крайней мере 4 из последних 5 точек или 8 из 10).</li>
</ul>
<p>Однако существует ещё одна потенциальная проблема с нашими текущими CI. Как вы можете видеть, есть довольно много случаев, когда CI чрезмерно широк. Это выглядит не так, и может снизить чувствительность нашего мониторинга.</p>
<h4 id="улучшение-точности">Улучшение точности</h4>
<p>Итак, после первой итерации мы определили несколько потенциальных улучшений для нашего подхода к мониторингу:</p>
<ul>
<li><strong>Используйте более высокий коэффициент для верхней границы</strong>, поскольку нас меньше беспокоят увеличения. Я использовал 6 стандартных отклонений вместо 3.</li>
<li><strong>Работайте с выбросами</strong>, чтобы отфильтровать прошлые аномалии. Я экспериментировал с удалением или ограничением верхних 10–20% выбросов и обнаружил, что ограничение на уровне 20% наряду с увеличением периода до 5 недель работало лучше всего на практике.</li>
<li><strong>Подавайте сигнал тревоги только тогда, когда 4 из последних 5 точек находятся за пределами CI</strong>, чтобы уменьшить количество ложных положительных оповещений, вызванных нормальной волатильностью.</li>
</ul>
<h4 id="операционные-проблемы">Операционные проблемы</h4>
<p>Мы обсудили математику, стоящую за системами оповещения и мониторинга. Однако есть несколько других нюансов, с которыми вы, вероятно, столкнётесь, как только начнёте развёртывать свою систему в производственной среде. Поэтому я хотел бы рассмотреть их, прежде чем заканчивать.</p>
<p><strong>Отстающие данные.</strong> Мы не сталкиваемся с этой проблемой в нашем примере, поскольку работаем с историческими данными, но в реальной жизни вам придётся иметь дело с задержками данных. Обычно требуется некоторое время, чтобы данные достигли вашего хранилища данных. Поэтому вам нужно научиться различать случаи, когда данные ещё не поступили, и фактические инциденты, влияющие на качество обслуживания клиентов. Самый простой подход — посмотреть на исторические данные, определить типичный лаг и отфильтровать последние 5–10 точек данных.</p>
<p><strong>Различная чувствительность для разных сегментов.</strong> Вы, скорее всего, захотите отслеживать не только основной KPI (количество поездок), но и разбивать его по нескольким сегментам (например, партнёры, районы и т. д.). Добавление большего количества сегментов всегда полезно, поскольку помогает вам обнаружить более мелкие изменения в определённых сегментах (например, что в Манхэттене возникла проблема). Однако, как я упоминал выше, есть обратная сторона: больше сегментов означает больше ложных положительных оповещений, с которыми вам нужно будет иметь дело. Чтобы держать это под контролем, вы можете использовать разные уровни чувствительности для разных сегментов (скажем, 3 стандартных отклонения для основного KPI и 5 для сегментов).</p>
<p><strong>Более умная система оповещения.</strong> Кроме того, когда вы отслеживаете множество сегментов, стоит сделать вашу систему оповещения немного умнее. Представьте, что у вас есть мониторинг основного KPI и 99 сегментов. Теперь представьте, что у вас глобальный сбой, и количество поездок падает везде. В течение следующих 5 минут вы (надеюсь) получите 100 уведомлений о том, что что-то сломалось. Это не идеальный опыт. Чтобы избежать такой ситуации, я бы построил логику для фильтрации ненужных уведомлений. Например:</p>
<ul>
<li>Если мы получили одно и то же уведомление в течение последних 3 часов, не запускайте другое оповещение.</li>
<li>Если есть уведомление о падении основного KPI плюс более чем в трёх сегментах, оповещать только об изменении основного KPI.</li>
</ul>
<p>В целом, усталость от оповещений — это реальность, поэтому стоит минимизировать шум.</p>
<h3 id="резюме">Резюме</h3>
<p>Мы рассмотрели множество аспектов оповещения и мониторинга. Позвольте мне подвести итог пошаговым руководством по началу мониторинга ваших KPI.</p>
<ul>
<li><strong>Первый шаг — собрать журнал изменений прошлых аномалий.</strong> Вы можете использовать его как набор тестовых случаев для вашей системы и для фильтрации аномальных периодов при расчёте CI.</li>
<li><strong>Далее создайте прототип и запустите его на исторических данных.</strong> Я бы начал с самого высокого уровня KPI, опробовал несколько возможных конфигураций и посмотрел, насколько хорошо он ловит предыдущие аномалии и генерирует ли много ложных оповещений. На этом этапе у вас должно быть жизнеспособное решение.</li>
<li><strong>Затем попробуйте его в производстве</strong>, поскольку именно здесь вам придётся иметь дело с задержками данных и увидеть, как мониторинг на самом деле работает на практике. Запустите его на 2–4 недели и настройте параметры, чтобы убедиться, что всё работает должным образом.</li>
<li><strong>После этого поделитесь мониторингом с коллегами и начните расширять его охват</strong>, включив в него другие сегменты. Не забывайте постоянно добавлять все аномалии в журнал изменений и устанавливать обратную связь для постоянного улучшения вашей системы.</li>
</ul>

        

      </article>
    </section>
  </div>



          
<footer class="px-6 py-12 bg-sky-950 text-white/50">
     <div class="inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900"></div>
      <div class="relative">
 
          <div class="border-t border-white/10"></div>

          
          <div class="mt-6 flex flex-col md:flex-row items-center justify-between gap-4">
            <p class="text-sm text-slate-400">© <span id="year"></span>P9X.ru 2010 - 2025г. услуги интернет маркетинга</p>
            <div class="flex items-center gap-4 text-slate-400 text-sm">
              <a href="#" class="hover:text-white transition">Документы</a>
              <a href="#" class="hover:text-white transition">Служба поддержки</a>
              <a href="#" class="hover:text-white transition">Статус</a>
            </div>
          </div>      
      </div>


<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105149615', 'ym');

    ym(105149615, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105149615" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

  </footer>
  </main>          

    <script>

        
        
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const sidebar = document.querySelector('.sidebar');
        
        mobileMenuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });
        
        
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.5
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const id = entry.target.getAttribute('id');
                if (entry.isIntersecting) {
                    document.querySelectorAll(`.toc-link[href="#${id}"]`).forEach(link => {
                        link.classList.add('active');
                    });
                } else {
                    document.querySelectorAll(`.toc-link[href="#${id}"]`).forEach(link => {
                        link.classList.remove('active');
                    });
                }
            });
        }, observerOptions);
        
        
        document.querySelectorAll('h2[id]').forEach(heading => {
            observer.observe(heading);
        });
    </script>



</body>
</html>
