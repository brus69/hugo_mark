<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Как оптимизировать свой маркетинговый бюджет | На пути к науке о данных | Агентство контекстной рекламы</title>
<meta name="description" content="">
<meta name="yandex-verification" content="242f5a0ee52d5836" />

<link rel="icon" type="image/x-icon" href="http://localhost:1313/favicon.ico">

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
 <style>
  .content h1 { 
        font-size: 1.875rem; 
        font-weight: bold; 
        margin-bottom: 1rem; 
    }
    .content h2 { 
        font-size: 1.5rem; 
        font-weight: 600; 
        margin-bottom: 0.75rem; 
    }
    .content h3 { 
        font-size: 1.25rem; 
        font-weight: 500; 
        margin-bottom: 0.5rem; 
    }
    .content p { 
        margin-bottom: 1rem; 
    }
    .content ul { 
        list-style-type: disc; 
        list-style-position: inside; 
        margin-bottom: 1rem; 
    }
    .content ol { 
        list-style-type: decimal; 
        list-style-position: inside; 
        margin-bottom: 1rem; 
    }
    .content a { 
        color: #2563eb; 
    }
    .content a:hover { 
        color: #1e40af; 
    }
    .content blockquote { 
        border-left: 4px solid #d1d5db; 
        padding-left: 1rem; 
        font-style: italic; 
    }

    
.content table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
    font-size: 0.875rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    border-radius: 0.5rem;
    overflow: hidden;
    border: 1px solid #e5e7eb;
}

.dark-mode .content table {
    border: 1px solid #4b5563;
}

.content thead {
    background-color: #eaebec;
}

.dark-mode .content thead {
    background-color: #374151;
}

.content th {
    padding: 0.75rem 1rem;
    text-align: left;
    font-weight: 600;
    color: #374151;
    border-bottom: 1px solid #e5e7eb;
    border-right: 1px solid #e5e7eb;  
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.dark-mode .content th {
    color: #f9fafb;
    border-bottom: 1px solid #4b5563;
    border-right: 1px solid #4b5563;  
}

.content th:last-child {
    border-right: none;  
}

.content td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #e5e7eb;
    border-right: 1px solid #e5e7eb;  
    color: #6b7280;
}

.dark-mode .content td {
    color: #d1d5db;
    border-bottom: 1px solid #4b5563;
    border-right: 1px solid #4b5563;  
}

.content td:last-child {
    border-right: none;  
}

.content tbody tr {
    transition: background-color 0.15s ease-in-out;
}

.content tbody tr:hover {
    background-color: #f9fafb;
}

.dark-mode .content tbody tr:hover {
    background-color: #374151;
}

.content tbody tr:last-child td {
    border-bottom: none;
}

 
.content tbody tr:nth-child(even) {
    background-color: #f4f5f7;
}

.dark-mode .content tbody tr:nth-child(even) {
    background-color: #1f2937;
}

.dark-mode .content tbody tr:nth-child(even):hover {
    background-color: #374151;
}

 
.content code:not(pre code) {
    background-color: #f3f4f6;
    color: #dc2626;
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
    font-weight: 500;
    border: 1px solid #e5e7eb;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
}

.dark-mode .content code:not(pre code) {
    background-color: #224464;
    color: #f87171;
    border: 1px solid #4b5563;
}

 
.content pre {
    background-color: #224464;
    color: #f9fafb;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1.5rem 0;
    border: 1px solid #374151;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
    font-size: 0.875rem;
    line-height: 1.5;
}

.dark-mode .content pre {
    background-color: #111827;
    border: 1px solid #374151;
}

 
.content pre code {
    background: none;
    color: inherit;
    padding: 0;
    border: none;
    font-size: inherit;
    font-weight: normal;
}

 
.content pre code .keyword { color: #f472b6; }  
.content pre code .function { color: #60a5fa; }  
.content pre code .string { color: #34d399; }  
.content pre code .comment { color: #9ca3af; font-style: italic; }  
.content pre code .number { color: #fbbf24; }  
.content pre code .class { color: #c084fc; }  
.content pre code .operator { color: #93c5fd; }  

 
.content pre::-webkit-scrollbar {
    height: 6px;
}

.content pre::-webkit-scrollbar-track {
    background: #374151;
    border-radius: 0 0 0.5rem 0.5rem;
}

.content pre::-webkit-scrollbar-thumb {
    background: #6b7280;
    border-radius: 3px;
}

.content pre::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

 
.content h1 code:not(pre code),
.content h2 code:not(pre code),
.content h3 code:not(pre code) {
    font-size: 0.9em;
    background-color: #fef2f2;
    color: #dc2626;
}

.dark-mode .content h1 code:not(pre code),
.dark-mode .content h2 code:not(pre code),
.dark-mode .content h3 code:not(pre code) {
    background-color: #7f1d1d;
    color: #fca5a5;
}

 
.content a code:not(pre code) {
    color: inherit;
    background-color: rgba(59, 130, 246, 0.1);
}

.dark-mode .content a code:not(pre code) {
    background-color: rgba(96, 165, 250, 0.2);
}
        :root {
            --color-bg: #1a1a1a;
            --color-text: #e6e6e6;
            --color-accent: #6b7280;
            --color-link: #9ca3af;
            --color-link-hover: #d1d5db;
        }
        
        .light-mode {
            --color-bg: #f9fafb;
            --color-text: #1f2937;
            --color-accent: #6b7280;
            --color-link: #4b5563;
            --color-link-hover: #111827;
        }
        
        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        a:hover {
            color: var(--color-link-hover);
        }
        
        .sidebar {
            position: fixed;
             
            height: 100vh;
            overflow-y: auto;
            
        }
        
        .main-content {
            margin-left: 350px;
            
             
        }
        
        .toc-container {
            position: fixed;
            right: 2rem;
            top: 2rem;
            width: 250px;
            display: none;
        }
        
        @media (min-width: 1280px) {
            .toc-container {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 50;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                 
            }
            
            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 100;
            }
        }
        
        .toc-link.active {
            color: var(--color-link-hover);
            font-weight: bold;
        }
        
        .social-icons a {
            margin-right: 0.5rem;
        }
        
        pre {
            background-color: rgba(107, 114, 128, 0.1);
            padding: 1rem;
            border-radius: 0.25rem;
            overflow-x: auto;
        }
        
        code {
            font-family: Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }
    </style>
</head>
  <body class="light-mode">
      <header>
    
  </header>
    
    <button class="mobile-menu-btn p-2 bg-gray-800 text-white rounded md:hidden">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
    </button>

    
    <aside class="sidebar border-r-4 border-sky-800  min-w-[350px] py-12 px-10 bg-gradient-to-br from-cyan-200 via-green-100 to-sky-100">
        <div class="flex flex-col items-center mb-8">
                
            
            <div class="w-24 h-24 mb-4 relative">
                <a href="/">
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 viewBox="0 0 550.000000 385.000000"
 preserveAspectRatio="xMidYMid meet">

<g transform="translate(0.000000,385.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M2780 3000 l0 -300 40 0 40 0 0 260 0 260 1165 0 1165 0 0 -1245 0
-1245 -1165 0 -1165 0 0 260 0 260 -40 0 -40 0 0 -300 0 -300 1245 0 1245 0 0
1325 0 1325 -1245 0 -1245 0 0 -300z"/>
<path d="M700 1975 l0 -635 145 0 145 0 0 245 0 245 383 0 c422 0 426 1 491
66 60 60 66 88 66 319 0 190 -2 214 -21 255 -25 56 -53 86 -104 113 -39 22
-49 22 -572 25 l-533 3 0 -636z m940 245 l0 -100 -325 0 -325 0 0 100 0 100
325 0 325 0 0 -100z"/>
<path d="M2320 2601 c-69 -22 -112 -58 -146 -121 -17 -31 -19 -60 -19 -260 0
-211 1 -227 22 -265 27 -51 68 -90 115 -109 32 -14 98 -16 438 -16 l400 0 0
-245 0 -245 145 0 145 0 0 536 c0 373 -3 548 -11 575 -16 50 -61 105 -112 132
-41 22 -48 22 -497 24 -250 1 -466 -2 -480 -6z m810 -381 l0 -100 -340 0 -340
0 0 100 0 100 340 0 340 0 0 -100z"/>
<path d="M3650 2607 c0 -1 99 -144 219 -317 l219 -314 -63 -91 c-34 -49 -133
-191 -219 -315 l-157 -225 172 -3 c97 -1 176 2 183 7 6 5 72 97 146 205 74
107 138 196 141 196 4 0 71 -92 149 -205 l143 -205 173 0 c96 0 174 2 174 4 0
3 -95 141 -211 308 -116 167 -214 308 -216 315 -3 7 92 151 211 322 119 170
216 312 216 315 0 3 -78 6 -174 6 l-174 0 -143 -205 c-78 -113 -145 -205 -149
-205 -3 0 -70 92 -148 205 l-143 205 -174 0 c-96 0 -175 -1 -175 -3z"/>
</g>
</svg>
</a>
            </div>

            <p class="text-xs text-center text-gray-500 max-w-[200px]">
                Профессиональное агентство контекстной рекламы с опытом более 18 лет.

            </p>
        </div>

        
        <nav class="mb-8">
          
        
            
  <nav>
    <ul>
    <li class="text-lg font-semibold">
      <a href="/">Контекстная реклама</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/analytics/">web-аналитика</a>
    </li>
    <li class="text-lg font-semibold">
      <a aria-current="true" class="ancestor" href="/posts/">Блог</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/about/">О нас</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/tags/">Категории</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/job/">Вакансии</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/tags/">Кейсы</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/calculators/">Калькуляторы</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/contacts/">Контакты</a>
    </li>
    </ul>
  </nav>

           

        </nav>

        
        <div class="social-icons  mt-auto">
<div>

<a href="https://t.me/your_link" target="_blank" class="inline-flex 
items-center justify-center px-3 py-3 text-white bg-[#2AABEE] font-medium text-sm rounded 
shadow-md hover:bg-[#279fd9] 
hover:shadow-lg focus:bg-[#2493c8] 
focus:shadow-lg focus:outline-none 
focus:ring-0 active:bg-[#2185b3] active:shadow-lg transition duration-150 ease-in-out">
  
     
<svg width="25px" height="25px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" 
fill="#fff" class="bi bi-telegram pr-1">
  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"/>
</svg>
                            
  
  Открыть в Telegram
</a>

</div>
            <div class="pt-6 flex gap-1 justify-left items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                sale@p9x.ru
            </div>
        </div>
        
        
        <div class="mt-8 pt-4 text-xs text-gray-500 border-t border-gray-700">
            <p>Powered by <a href="#" class="hover:underline">Hugo</a> | Themed with <a href="#" class="hover:underline">poison</a></p>
            <p>© 2010 - 2025 Poison. All rights reserved.</p>
        </div>
    </aside>

  <main class="main-content bg-white">
 
            
            
  <article class="prose prose-lg py-8 px-4 max-w-[1200px]">
    <h1 class="text-2xl font-bold mb-4">
            Как оптимизировать свой маркетинговый бюджет
    </h1>

    
    
    <time class="block mb-6 text-gray-500" datetime="2025-11-19T22:53:35&#43;00:00">November 19, 2025</time>

    <div class="content mb-8 ">
      <h3 id="модели-комплекса-маркетинга--мощный-инструмент-для-понимания-влияния-различных-маркетинговых-каналов-на-продажи">Модели комплекса маркетинга — мощный инструмент для понимания влияния различных маркетинговых каналов на продажи</h3>
<p>Модели комплекса маркетинга — это мощный инструмент для понимания влияния различных маркетинговых каналов на продажи. Создавая модель комплекса маркетинга, маркетологи могут количественно оценить вклад каждого канала в общие продажи, а затем использовать эту информацию для оптимизации распределения бюджета.</p>
<p>До сих пор я написал целую серию статей о <strong>создании</strong> моделей комплекса маркетинга, но всё ещё должен написать статью о том, как использовать эти модели для оптимизации расходов на медиа. Сегодня ваш счастливый день, поскольку в этой статье я покажу вам, как это сделать!</p>
<h4 id="предварительные-условия">Предварительные условия</h4>
<p>Прежде чем мы сможем что-то оптимизировать, мы должны сначала построить модель. Мы сделаем это очень быстро, чтобы как можно скорее перейти к основному разделу этой статьи.</p>
<h4 id="данные">Данные</h4>
<p>Сначала давайте загрузим некоторые данные. Я буду использовать тот же набор данных, что и в моих старых статьях.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.model_selection <span style="color:#f92672">import</span> cross_val_score, TimeSeriesSplit
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;https://raw.githubusercontent.com/Garve/datasets/4576d323bf2b66c906d5130d686245ad205505cf/mmm.csv&#39;</span>,
</span></span><span style="display:flex;"><span>    parse_dates<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;Date&#39;</span>],
</span></span><span style="display:flex;"><span>    index_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Date&#39;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>X <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>drop(columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;Sales&#39;</span>])
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;Sales&#39;</span>]
</span></span></code></pre></div><p>Набор данных выглядит следующим образом:</p>
<p>Представьте, что вы работаете в компании, которая продаёт какой-то продукт. Вы можете увидеть еженедельные продажи этого продукта в столбце <strong>Sales</strong>. Чтобы увеличить эти продажи, вы тратите деньги на рекламу, например, на <strong>телевидение</strong>, <strong>радио</strong> и <strong>баннерную</strong> рекламу.</p>
<h4 id="модель">Модель</h4>
<p>Построение сложных моделей, таких как XGBoost или глубокие нейронные сети, трудно интерпретировать и оптимизировать. Мы обращаемся к проверенному методу, который использует интерпретируемые эффекты переноса и насыщения для построения обобщённой аддитивной модели.</p>
<p>Логика, лежащая в основе этой таблицы, заключается в следующем: представьте, что вы работаете в компании, которая продаёт какой-то продукт. Вы можете увидеть еженедельные продажи этого продукта в столбце <strong>Sales</strong>. Чтобы увеличить эти продажи, вы тратите деньги на рекламу, например, на <strong>телевидение</strong>, <strong>радио</strong> и <strong>баннерную</strong> рекламу.</p>
<p>Мы хотим смоделировать продажи, используя расходы на рекламу и дополнительные <em>управляющие переменные</em>, такие как день недели, месяц, цена продукта, погода и т. д.</p>
<h4 id="модель-1">Модель</h4>
<p>Построение сложных моделей, таких как XGBoost или глубокие нейронные сети, трудно интерпретировать и оптимизировать. Мы обращаемся к проверенному методу, который использует интерпретируемые эффекты переноса и насыщения для построения обобщённой аддитивной модели.</p>
<p>Блоки переноса и насыщения — это интуитивно понятные преобразования признаков:</p>
<ul>
<li><strong>Перенос</strong> моделирует, что расходы на медиа в момент времени <em>t</em> могут всё ещё влиять на продажи в моменты времени <em>t</em> + 1, <em>t</em> + 2 и т. д., или, наоборот, продажи, наблюдаемые в момент времени <em>t</em>, также зависят от расходов в моменты времени <em>t –</em> 1, <em>t –</em> 2 и т. д.</li>
<li><strong>Насыщение</strong> моделирует убывающие темпы возврата, например, увеличение ваших расходов по каналу с 0 € до 100 000 € имеет большое влияние, но изменение его с 1 000 000 000 до 1 000 100 000 больше не влияет.</li>
</ul>
<blockquote>
<p><strong>Примечание:</strong> на графике управляющие переменные опущены. Это нормально, потому что они нам всё равно не нужны для оптимизации — мы не можем их изменить, как деньги, которые мы вкладываем в наши медиаканалы. Единственная управляющая переменная, которую мы <strong>можем</strong> изменить, — это цена, но мы предполагаем, что она здесь постоянна, и что мы действительно хотим оптимизировать только наши расходы на медиа.</p>
</blockquote>
<p>Модель имеет вид:</p>
<p><em>β</em> — коэффициент насыщения, <em>λ</em> — сила переноса, <em>ℓ</em> — длина переноса.</p>
<p>Мы можем узнать эти параметры, рассматривая их как гиперпараметры, или используя байесовские методы и рассматривая их как обычные обучаемые параметры. Мы видели в деталях, как получить эти параметры во всех моих последних статьях о моделировании комплекса маркетинга, поэтому я не буду вдаваться в эту тему.</p>
<p>Вместо этого давайте предположим, что у нас есть числа сейчас, и мы хотим использовать их для создания оптимизированного плана распределения медиабюджета.</p>
<h4 id="оптимизация-медиабюджета">Оптимизация медиабюджета</h4>
<p>Давайте предположим, что наши предыдущие попытки моделирования комплекса маркетинга оставили нам следующие параметры:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>N <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tv_coef <span style="color:#f92672">=</span> <span style="color:#ae81ff">10000</span>       
</span></span><span style="display:flex;"><span>tv_lags <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>           
</span></span><span style="display:flex;"><span>tv_carryover <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>    
</span></span><span style="display:flex;"><span>tv_saturation <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.002</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>radio_coef <span style="color:#f92672">=</span> <span style="color:#ae81ff">8000</span>
</span></span><span style="display:flex;"><span>radio_lags <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>radio_carryover <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>
</span></span><span style="display:flex;"><span>radio_saturation <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.0001</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>banners_coef <span style="color:#f92672">=</span> <span style="color:#ae81ff">14000</span>
</span></span><span style="display:flex;"><span>banners_lags <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>banners_carryover <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>
</span></span><span style="display:flex;"><span>banners_saturation <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.001</span>
</span></span></code></pre></div><p>Мы теперь перестроим модель комплекса маркетинга в Python, используя numpy.</p>
<h3 id="переимплементация-нашей-модели-в-numpy">Переимплементация нашей модели в Numpy</h3>
<p>Сначала давайте определим некоторые матрицы, которые учитывают эффект переноса.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tv_carryover_matrix <span style="color:#f92672">=</span> sum([np<span style="color:#f92672">.</span>diag(tv_carryover<span style="color:#f92672">**</span>i<span style="color:#f92672">*</span>np<span style="color:#f92672">.</span>ones(N<span style="color:#f92672">-</span>i), k<span style="color:#f92672">=-</span>i) <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(tv_lags)])
</span></span><span style="display:flex;"><span>radio_carryover_matrix <span style="color:#f92672">=</span> sum([np<span style="color:#f92672">.</span>diag(radio_carryover<span style="color:#f92672">**</span>i<span style="color:#f92672">*</span>np<span style="color:#f92672">.</span>ones(N<span style="color:#f92672">-</span>i), k<span style="color:#f92672">=-</span>i) <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(radio_lags)])
</span></span><span style="display:flex;"><span>banners_carryover_matrix <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>eye(N)
</span></span></code></pre></div><p>Это реализует перенос с силой 0,2 и длиной 1. Вы можете увидеть это, если умножите эту матрицу на вектор расходов.</p>
<p>С этим покончено, давайте продолжим с насыщением. Это простая формула, включающая <code>exp</code>, так что проблем нет.</p>
<p>Мы можем написать:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>sales <span style="color:#f92672">=</span> (
</span></span><span style="display:flex;"><span>    tv_coef <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>sum(<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> np<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>tv_saturation <span style="color:#f92672">*</span> tv_carryover_matrix <span style="color:#f92672">@</span> data[<span style="color:#e6db74">&#34;TV&#34;</span>])) 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">+</span> radio_coef <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>sum(<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> np<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>radio_saturation <span style="color:#f92672">*</span> radio_carryover_matrix <span style="color:#f92672">@</span> data[<span style="color:#e6db74">&#34;Radio&#34;</span>])) 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">+</span> banners_coef <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>sum(<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> np<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>banners_saturation <span style="color:#f92672">*</span> banners_carryover_matrix <span style="color:#f92672">@</span> data[<span style="color:#e6db74">&#34;Banners&#34;</span>]))
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>Это даёт нам сумму продаж, <strong>которые поступают от наших маркетинговых усилий</strong>, поскольку мы игнорируем управляющие переменные здесь. Число составляет 3 584 648,73 €, и мы хотим увеличить его сейчас, изменив наши расходы на медиа!</p>
<h3 id="о-результате">О результате</h3>
<p>Вы также можете увидеть здесь интересный шаблон.</p>
<blockquote>
<p>Похоже, что тратить бюджет поровну — это лучший вариант.</p>
</blockquote>
<p>Только расходы в первый период немного выше, но затем они как бы уравновешиваются. Это связано с тем, как работает наша модель: в первый период ещё нет адстока, поэтому нам нужно вложить немного больше, чтобы продажи начали расти. Начиная со второго периода, нам нужно вкладывать столько средств в модель, чтобы поддерживать высокий уровень адстока, но не слишком высокий из-за насыщения. В последний период адсток не имеет значения, поскольку время там заканчивается, как это предусмотрено моделью. Поэтому оптимизированный бюджет там ниже.</p>
<h3 id="переимплементация-нашей-модели-в-cvxpy">Переимплементация нашей модели в CVXPY</h3>
<p>Хорошо, теперь мы готовы получить оптимальное решение, используя cvxpy. Сначала мы определяем переменные, в нашем случае по одной для каждого канала и каждого временного шага, так что 3 _<em>N</em> = 3_200 = 600 переменных в сумме.</p>
<p>Без чего-либо ещё оптимум был бы установлен для всех переменных равным бесконечности, поэтому нам нужны некоторые ограничения. Переменные должны быть:</p>
<ol>
<li>неотрицательными, и</li>
<li>мы хотим, чтобы сумма всех этих 600 переменных была меньше или равна тому, что мы потратили исторически.</li>
</ol>
<p>Затем мы хотим оптимизировать модель, которую мы реализовали с помощью функций numpy, но используя их эквивалент в cvxpy вместо этого, что обычно означает написание <code>cp</code> вместо <code>np</code>. Мы даже можем повторно использовать матрицу переноса из предыдущего!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> cvxpy <span style="color:#66d9ef">as</span> cp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>original_total_spends <span style="color:#f92672">=</span> data[[<span style="color:#e6db74">&#34;TV&#34;</span>, <span style="color:#e6db74">&#34;Radio&#34;</span>, <span style="color:#e6db74">&#34;Banners&#34;</span>]]<span style="color:#f92672">.</span>sum()<span style="color:#f92672">.</span>sum()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tv <span style="color:#f92672">=</span> cp<span style="color:#f92672">.</span>Variable(N)
</span></span><span style="display:flex;"><span>radio <span style="color:#f92672">=</span> cp<span style="color:#f92672">.</span>Variable(N)
</span></span><span style="display:flex;"><span>banners <span style="color:#f92672">=</span> cp<span style="color:#f92672">.</span>Variable(N)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>constraints <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    tv <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    radio <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    banners <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    cp<span style="color:#f92672">.</span>sum(tv <span style="color:#f92672">+</span> radio <span style="color:#f92672">+</span> banners) <span style="color:#f92672">&lt;=</span> original_total_spends,
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>problem <span style="color:#f92672">=</span> cp<span style="color:#f92672">.</span>Problem(
</span></span><span style="display:flex;"><span>    cp<span style="color:#f92672">.</span>Maximize(
</span></span><span style="display:flex;"><span>        tv_coef <span style="color:#f92672">*</span> cp<span style="color:#f92672">.</span>sum(<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> cp<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>tv_saturation <span style="color:#f92672">*</span> tv_carryover_matrix <span style="color:#f92672">@</span> tv)) 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">+</span> radio_coef <span style="color:#f92672">*</span> cp<span style="color:#f92672">.</span>sum(<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> cp<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>radio_saturation <span style="color:#f92672">*</span> radio_carryover_matrix <span style="color:#f92672">@</span> radio)) 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">+</span> banners_coef <span style="color:#f92672">*</span> cp<span style="color:#f92672">.</span>sum(<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> cp<span style="color:#f92672">.</span>exp(<span style="color:#f92672">-</span>banners_saturation <span style="color:#f92672">*</span> banners_carryover_matrix <span style="color:#f92672">@</span> banners))
</span></span><span style="display:flex;"><span>    ), 
</span></span><span style="display:flex;"><span>    constraints
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>Мы можем теперь решить эту задачу максимизации за <strong>очень короткое время</strong> через</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>problem<span style="color:#f92672">.</span>solve()
</span></span></code></pre></div><p>Мы можем получить оптимальный бюджет через <code>tv.value, radio.value, banners.value</code>. Вы можете увидеть, что расходы постоянны для каждой недели в каждом канале, что, возможно, не так интересно, как ожидалось. Но оптимально — это оптимально, так что мы возьмём это.</p>
<h3 id="дополнительные-ограничения">Дополнительные ограничения</h3>
<p>Вот и всё, теперь у вас есть базовый инструмент для оптимизации бюджета! И самое приятное то, что вы можете смоделировать ещё больше ограничений, которые могут возникнуть в бизнесе. Например, бизнес может сказать, что общие расходы на радио довольно высоки:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>sum(radio<span style="color:#f92672">.</span>value)
</span></span></code></pre></div><p>Бизнес хочет, чтобы это было меньше 300 000 € по стратегическим причинам, которые модель не может знать. Ладно, нет проблем, давайте добавим это в набор ограничений!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>constraints <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    tv <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    radio <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    banners <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    cp<span style="color:#f92672">.</span>sum(tv <span style="color:#f92672">+</span> radio <span style="color:#f92672">+</span> banners) <span style="color:#f92672">&lt;=</span> original_total_spends,
</span></span><span style="display:flex;"><span>    cp<span style="color:#f92672">.</span>sum(radio) <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">300000</span> 
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>Легко, как это. Мы можем снова запустить оптимизацию, и мы получим слегка сниженные оптимизированные продажи в размере 4 990 178,80 €. Но если мы проверим сумму расходов на радио сейчас</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>sum(radio<span style="color:#f92672">.</span>value)
</span></span></code></pre></div><p>мы увидим, что бизнес-ограничение было соблюдено. И мы можем добавить ещё больше ограничений, таких как:</p>
<ul>
<li>сумма двух каналов должна быть меньше или больше некоторого числа, или</li>
<li>в некоторые недели мы не допускаем никаких расходов на медиа.</li>
</ul>
<p>Вам нужно только смоделировать это, используя некоторые суммы и равенства или неравенства.</p>
<h4 id="заключение">Заключение</h4>
<p>В этой статье мы сначала повторили формулы для моделей комплекса маркетинга. Это было важно, потому что нам нужно было перестроить модели. К счастью, поскольку наши модели просты и интерпретируемы, это было совсем несложно.</p>
<p>Наша модель имела ещё одно замечательное свойство: она вогнутая! В этом случае максимальное значение продаж однозначно определено, и мы могли добраться до него с помощью выпуклой оптимизации. Оптимизация невыпуклых или не вогнутых функций сложна в общем случае и больше похожа на искусство, связанное с настройкой многих гиперпараметров, поэтому мы не пошли по этому пути.</p>
<p>В качестве грандиозного финала мы оптимизировали наш медиабюджет! Пора было это сделать. Мы даже увидели, как включить больше ограничений в модель, например, что некоторые каналы нуждаются в минимальных или максимальных бюджетных ассигнованиях. Используя этот подход, вы теперь можете оптимизировать своё будущее распределение медиабюджета.</p>
<p>Другая оптимизация, о которой мы не говорили, — это <strong>минимизация ваших медиабюджета</strong> при условии, что вы хотите достичь определённой минимальной суммы продаж, то есть тратить как можно меньше денег, чтобы всё равно достичь своей цели. Это то, что вы также можете легко реализовать сами! В отличие от этого, прежде чем мы взяли все деньги, которые у нас были, и сделали как можно больше продаж.</p>

    </div>

    <div class="tags mt-8">
      

    </div>
  </article>

          
            
  </main>          

    <script>

        
        
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const sidebar = document.querySelector('.sidebar');
        
        mobileMenuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });
        
        
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.5
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const id = entry.target.getAttribute('id');
                if (entry.isIntersecting) {
                    document.querySelectorAll(`.toc-link[href="#${id}"]`).forEach(link => {
                        link.classList.add('active');
                    });
                } else {
                    document.querySelectorAll(`.toc-link[href="#${id}"]`).forEach(link => {
                        link.classList.remove('active');
                    });
                }
            });
        }, observerOptions);
        
        
        document.querySelectorAll('h2[id]').forEach(heading => {
            observer.observe(heading);
        });
    </script>


  <footer class="px-6 py-12 bg-sky-950 text-white/50">
    
<p>P9X.ru 2010 - 2025г. услуги интернет маркетинга</p>

<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105149615', 'ym');

    ym(105149615, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105149615" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

  </footer>
</body>
</html>
