<!DOCTYPE html>
<html lang="ru" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>–ö–∞–∫ –æ—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞ –≤ –∫–æ–Ω–≤–µ–π–µ—Ä–∞—Ö RAG: Precision@k, Recall@k –∏ F1@k | –ù–∞ –ø—É—Ç–∏ –∫ –Ω–∞—É–∫–µ –æ –¥–∞–Ω–Ω—ã—Ö | –ê–≥–µ–Ω—Ç—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π —Ä–µ–∫–ª–∞–º—ã</title>
<meta name="description" content="">
<meta name="yandex-verification" content="242f5a0ee52d5836" />

<link rel="icon" type="image/x-icon" href="http://localhost:1313/favicon.ico">

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
 <style>
  .content h1 { 
        font-size: 1.875rem; 
        font-weight: bold; 
        margin-bottom: 1rem; 
    }
    .content h2 { 
        font-size: 1.5rem; 
        font-weight: 600; 
        margin-bottom: 0.75rem; 
    }
    .content h3 { 
        font-size: 1.25rem; 
        font-weight: 500; 
        margin-bottom: 0.5rem; 
    }
    .content p { 
        margin-bottom: 1rem; 
    }
    .content ul { 
        list-style-type: disc; 
        list-style-position: inside; 
        margin-bottom: 1rem; 
    }
    .content ol { 
        list-style-type: decimal; 
        list-style-position: inside; 
        margin-bottom: 1rem; 
    }
    .content a { 
        color: #2563eb; 
    }
    .content a:hover { 
        color: #1e40af; 
    }
    .content blockquote { 
        border-left: 4px solid #d1d5db; 
        padding-left: 1rem; 
        font-style: italic; 
    }

    
.content table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
    font-size: 0.875rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    border-radius: 0.5rem;
    overflow: hidden;
    border: 1px solid #e5e7eb;
}

.dark-mode .content table {
    border: 1px solid #4b5563;
}

.content thead {
    background-color: #eaebec;
}

.dark-mode .content thead {
    background-color: #374151;
}

.content th {
    padding: 0.75rem 1rem;
    text-align: left;
    font-weight: 600;
    color: #374151;
    border-bottom: 1px solid #e5e7eb;
    border-right: 1px solid #e5e7eb;  
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.dark-mode .content th {
    color: #f9fafb;
    border-bottom: 1px solid #4b5563;
    border-right: 1px solid #4b5563;  
}

.content th:last-child {
    border-right: none;  
}

.content td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #e5e7eb;
    border-right: 1px solid #e5e7eb;  
    color: #6b7280;
}

.dark-mode .content td {
    color: #d1d5db;
    border-bottom: 1px solid #4b5563;
    border-right: 1px solid #4b5563;  
}

.content td:last-child {
    border-right: none;  
}

.content tbody tr {
    transition: background-color 0.15s ease-in-out;
}

.content tbody tr:hover {
    background-color: #f9fafb;
}

.dark-mode .content tbody tr:hover {
    background-color: #374151;
}

.content tbody tr:last-child td {
    border-bottom: none;
}

 
.content tbody tr:nth-child(even) {
    background-color: #f4f5f7;
}

.dark-mode .content tbody tr:nth-child(even) {
    background-color: #1f2937;
}

.dark-mode .content tbody tr:nth-child(even):hover {
    background-color: #374151;
}

 
.content code:not(pre code) {
    background-color: #f3f4f6;
    color: #dc2626;
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
    font-weight: 500;
    border: 1px solid #e5e7eb;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
}

.dark-mode .content code:not(pre code) {
    background-color: #224464;
    color: #f87171;
    border: 1px solid #4b5563;
}

 
.content pre {
    background-color: #224464;
    color: #f9fafb;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1.5rem 0;
    border: 1px solid #374151;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
    font-size: 0.875rem;
    line-height: 1.5;
}

.dark-mode .content pre {
    background-color: #111827;
    border: 1px solid #374151;
}

 
.content pre code {
    background: none;
    color: inherit;
    padding: 0;
    border: none;
    font-size: inherit;
    font-weight: normal;
}

 
.content pre code .keyword { color: #f472b6; }  
.content pre code .function { color: #60a5fa; }  
.content pre code .string { color: #34d399; }  
.content pre code .comment { color: #9ca3af; font-style: italic; }  
.content pre code .number { color: #fbbf24; }  
.content pre code .class { color: #c084fc; }  
.content pre code .operator { color: #93c5fd; }  

 
.content pre::-webkit-scrollbar {
    height: 6px;
}

.content pre::-webkit-scrollbar-track {
    background: #374151;
    border-radius: 0 0 0.5rem 0.5rem;
}

.content pre::-webkit-scrollbar-thumb {
    background: #6b7280;
    border-radius: 3px;
}

.content pre::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
}

 
.content h1 code:not(pre code),
.content h2 code:not(pre code),
.content h3 code:not(pre code) {
    font-size: 0.9em;
    background-color: #fef2f2;
    color: #dc2626;
}

.dark-mode .content h1 code:not(pre code),
.dark-mode .content h2 code:not(pre code),
.dark-mode .content h3 code:not(pre code) {
    background-color: #7f1d1d;
    color: #fca5a5;
}

 
.content a code:not(pre code) {
    color: inherit;
    background-color: rgba(59, 130, 246, 0.1);
}

.dark-mode .content a code:not(pre code) {
    background-color: rgba(96, 165, 250, 0.2);
}
        :root {
            --color-bg: #1a1a1a;
            --color-text: #e6e6e6;
            --color-accent: #6b7280;
            --color-link: #9ca3af;
            --color-link-hover: #d1d5db;
        }
        
        .light-mode {
            --color-bg: #f9fafb;
            --color-text: #1f2937;
            --color-accent: #6b7280;
            --color-link: #4b5563;
            --color-link-hover: #111827;
        }
        
        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        a {
            color: var(--color-link);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        a:hover {
            color: var(--color-link-hover);
        }
        
        .sidebar {
            position: fixed;
             
            height: 100vh;
            overflow-y: auto;
            
        }
        
        .main-content {
            margin-left: 350px;
            
             
        }
        
        .toc-container {
            position: fixed;
            right: 2rem;
            top: 2rem;
            width: 250px;
            display: none;
        }
        
        @media (min-width: 1280px) {
            .toc-container {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 50;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                 
            }
            
            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 100;
            }
        }
        
        .toc-link.active {
            color: var(--color-link-hover);
            font-weight: bold;
        }
        
        .social-icons a {
            margin-right: 0.5rem;
        }
        
        pre {
            background-color: rgba(107, 114, 128, 0.1);
            padding: 1rem;
            border-radius: 0.25rem;
            overflow-x: auto;
        }
        
        code {
            font-family: Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }
    </style>
</head>
  <body class="light-mode">
      <header>
    
  </header>
    
    <button class="mobile-menu-btn p-2 bg-gray-800 text-white rounded md:hidden">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
    </button>

    
    <aside class="sidebar border-r-4 border-sky-800  min-w-[350px] py-12 px-10 bg-gradient-to-br from-cyan-200 via-green-100 to-sky-100">
        <div class="flex flex-col items-center mb-8">
                
            
            <div class="w-24 h-24 mb-4 relative">
                <a href="/">
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 viewBox="0 0 550.000000 385.000000"
 preserveAspectRatio="xMidYMid meet">

<g transform="translate(0.000000,385.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M2780 3000 l0 -300 40 0 40 0 0 260 0 260 1165 0 1165 0 0 -1245 0
-1245 -1165 0 -1165 0 0 260 0 260 -40 0 -40 0 0 -300 0 -300 1245 0 1245 0 0
1325 0 1325 -1245 0 -1245 0 0 -300z"/>
<path d="M700 1975 l0 -635 145 0 145 0 0 245 0 245 383 0 c422 0 426 1 491
66 60 60 66 88 66 319 0 190 -2 214 -21 255 -25 56 -53 86 -104 113 -39 22
-49 22 -572 25 l-533 3 0 -636z m940 245 l0 -100 -325 0 -325 0 0 100 0 100
325 0 325 0 0 -100z"/>
<path d="M2320 2601 c-69 -22 -112 -58 -146 -121 -17 -31 -19 -60 -19 -260 0
-211 1 -227 22 -265 27 -51 68 -90 115 -109 32 -14 98 -16 438 -16 l400 0 0
-245 0 -245 145 0 145 0 0 536 c0 373 -3 548 -11 575 -16 50 -61 105 -112 132
-41 22 -48 22 -497 24 -250 1 -466 -2 -480 -6z m810 -381 l0 -100 -340 0 -340
0 0 100 0 100 340 0 340 0 0 -100z"/>
<path d="M3650 2607 c0 -1 99 -144 219 -317 l219 -314 -63 -91 c-34 -49 -133
-191 -219 -315 l-157 -225 172 -3 c97 -1 176 2 183 7 6 5 72 97 146 205 74
107 138 196 141 196 4 0 71 -92 149 -205 l143 -205 173 0 c96 0 174 2 174 4 0
3 -95 141 -211 308 -116 167 -214 308 -216 315 -3 7 92 151 211 322 119 170
216 312 216 315 0 3 -78 6 -174 6 l-174 0 -143 -205 c-78 -113 -145 -205 -149
-205 -3 0 -70 92 -148 205 l-143 205 -174 0 c-96 0 -175 -1 -175 -3z"/>
</g>
</svg>
</a>
            </div>

            <p class="text-xs text-center text-gray-500 max-w-[200px]">
                –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–π —Ä–µ–∫–ª–∞–º—ã —Å –æ–ø—ã—Ç–æ–º –±–æ–ª–µ–µ 18 –ª–µ—Ç.

            </p>
        </div>

        
        <nav class="mb-8">
          
        
            
  <nav>
    <ul>
    <li class="text-lg font-semibold">
      <a href="/">–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/analytics/">web-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞</a>
    </li>
    <li class="text-lg font-semibold">
      <a aria-current="true" class="ancestor" href="/posts/">–ë–ª–æ–≥</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/about/">–û –Ω–∞—Å</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/tags/">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/job/">–í–∞–∫–∞–Ω—Å–∏–∏</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/tags/">–ö–µ–π—Å—ã</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/calculators/">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</a>
    </li>
    <li class="text-lg font-semibold">
      <a href="/contacts/">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    </li>
    </ul>
  </nav>

           

        </nav>

        
        <div class="social-icons  mt-auto">
<div>

<a href="https://t.me/your_link" target="_blank" class="inline-flex 
items-center justify-center px-3 py-3 text-white bg-[#2AABEE] font-medium text-sm rounded 
shadow-md hover:bg-[#279fd9] 
hover:shadow-lg focus:bg-[#2493c8] 
focus:shadow-lg focus:outline-none 
focus:ring-0 active:bg-[#2185b3] active:shadow-lg transition duration-150 ease-in-out">
  
     
<svg width="25px" height="25px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" 
fill="#fff" class="bi bi-telegram pr-1">
  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"/>
</svg>
                            
  
  –û—Ç–∫—Ä—ã—Ç—å –≤ Telegram
</a>

</div>
            <div class="pt-6 flex gap-1 justify-left items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                sale@p9x.ru
            </div>
        </div>
        
        
        <div class="mt-8 pt-4 text-xs text-gray-500 border-t border-gray-700">
            <p>Powered by <a href="#" class="hover:underline">Hugo</a> | Themed with <a href="#" class="hover:underline">poison</a></p>
            <p>¬© 2010 - 2025 Poison. All rights reserved.</p>
        </div>
    </aside>

  <main class="main-content bg-white">
 
            
            
  <article class="prose prose-lg py-8 px-4 max-w-[1200px]">
    <h1 class="text-2xl font-bold mb-4">
            –ö–∞–∫ –æ—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤ —Ç—Ä—É–±–æ–ø—Ä–æ–≤–æ–¥–∞—Ö RAG: –¢–æ—á–Ω–æ—Å—Ç—å @k, –æ—Ç–∑—ã–≤@k –∏ F1@k
    </h1>

    
    
    <time class="block mb-6 text-gray-500" datetime="2025-11-19T22:53:35&#43;00:00">November 19, 2025</time>

    <div class="content mb-8 ">
      <h3 id="—è-–ø—Ä–æ—à—ë–ª-—Å-–≤–∞–º–∏-–ø—É—Ç—å-—Å–æ–∑–¥–∞–Ω–∏—è-–±–∞–∑–æ–≤–æ–≥–æ-–∫–æ–Ω–≤–µ–π–µ—Ä–∞-rag-–Ω–∞-python-–∞-—Ç–∞–∫–∂–µ-—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è-–±–æ–ª—å—à–∏—Ö-—Ç–µ–∫—Å—Ç–æ–≤—ã—Ö-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤-–Ω–∞-—á–∞—Å—Ç–∏-–º—ã-—Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏-–∫–∞–∫-–¥–æ–∫—É–º–µ–Ω—Ç—ã-–ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è-–≤-—ç–º–±–µ–¥–¥–∏–Ω–≥–∏-—á—Ç–æ-–ø–æ–∑–≤–æ–ª—è–µ—Ç-–±—ã—Å—Ç—Ä–æ-–∏—Å–∫–∞—Ç—å-–ø–æ—Ö–æ–∂–∏–µ-–¥–æ–∫—É–º–µ–Ω—Ç—ã-–≤-–≤–µ–∫—Ç–æ—Ä–Ω–æ–π-–±–∞–∑–µ-–¥–∞–Ω–Ω—ã—Ö-–∞-—Ç–∞–∫–∂–µ-–∫–∞–∫-–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è-–ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ-–¥–ª—è-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è-–Ω–∞–∏–±–æ–ª–µ–µ-–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤-–¥–ª—è-–æ—Ç–≤–µ—Ç–∞-–Ω–∞-–∑–∞–ø—Ä–æ—Å-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">–Ø –ø—Ä–æ—à—ë–ª —Å –≤–∞–º–∏ –ø—É—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ RAG –Ω–∞ Python, –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ —á–∞—Å—Ç–∏. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏, –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –∏—Å–∫–∞—Ç—å –ø–æ—Ö–æ–∂–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</h3>
<p>–ò—Ç–∞–∫, —Ç–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –ø–æ–ª—É—á–∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ–¥–∞—Ç—å –∏—Ö –≤ LLM –¥–ª—è —ç—Ç–∞–ø–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –ù–æ –ø—Ä–µ–∂–¥–µ –≤–∞–∂–Ω–æ —É–º–µ—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, —Ö–æ—Ä–æ—à–æ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ –º–æ–∂–µ—Ç –ª–∏ –æ–Ω —É—Å–ø–µ—à–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –í –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, ‚Äî —ç—Ç–æ –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞.</p>
<p>–ü–æ—ç—Ç–æ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–æ –º—ã –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–º –ø–æ—Å—Ç–µ. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è.</p>
<h3 id="–ø–æ—á–µ–º—É-–≤–∞–∂–Ω–æ-–∏–∑–º–µ—Ä—è—Ç—å-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å-–∏–∑–≤–ª–µ—á–µ–Ω–∏—è">–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –∏–∑–º–µ—Ä—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è</h3>
<p>–ù–∞—à–∞ —Ü–µ–ª—å ‚Äî –æ—Ü–µ–Ω–∏—Ç—å, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–æ –Ω–∞—à–∞ –º–æ–¥–µ–ª—å –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –∏ –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —Ç–µ–∫—Å—Ç–∞-–∫–∞–Ω–¥–∏–¥–∞—Ç–∞. –ü–æ —Å—É—Ç–∏, –º—ã –ø—ã—Ç–∞–µ–º—Å—è –≤—ã—è—Å–Ω–∏—Ç—å: ¬´–ù–∞—Ö–æ–¥—è—Ç—Å—è –ª–∏ –Ω—É–∂–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≥–¥–µ-—Ç–æ –≤ —Ç–æ–ø-k –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö –Ω–∞–±–æ—Ä–∞—Ö?¬ª –∏–ª–∏ ¬´–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∏ –Ω–∞—à –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ–ª–Ω—ã–π –º—É—Å–æ—Ä?¬ª üòõ –°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏–∑ –Ω–∏—Ö —Ä–æ–¥–æ–º –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.</p>
<p>–ü—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å, –ø–æ–ª–µ–∑–Ω–æ —Ä–∞–∑–ª–∏—á–∞—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ –º–µ—Ä ‚Äî <strong>–±–∏–Ω–∞—Ä–Ω—ã–µ</strong> –∏ <strong>–≥—Ä–∞–¥—É–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</strong> —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏. –ë–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –±–∏–Ω–∞—Ä–Ω—ã–µ –º–µ—Ä—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É—é—Ç –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –ª–∏–±–æ –∫–∞–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π, –ª–∏–±–æ –∫–∞–∫ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî —Å—Ä–µ–¥–Ω–µ–≥–æ –Ω–µ –¥–∞–Ω–æ. –ù–∞–ø—Ä–æ—Ç–∏–≤, –≥—Ä–∞–¥—É–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–º—É –∏–∑–≤–ª–µ—á—ë–Ω–Ω–æ–º—É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É, –≥–¥–µ-—Ç–æ –≤ —Å–ø–µ–∫—Ç—Ä–µ –æ—Ç –ø–æ–ª–Ω–æ–π –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–æ –ø–æ–ª–Ω–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.</p>
<h3 id="–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ-–±–∏–Ω–∞—Ä–Ω—ã–µ-–º–µ—Ä—ã-–Ω–µ-—É—á–∏—Ç—ã–≤–∞—é—â–∏–µ-–ø–æ—Ä—è–¥–æ–∫">–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ –º–µ—Ä—ã, –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—â–∏–µ –ø–æ—Ä—è–¥–æ–∫</h3>
<p>–ë–∏–Ω–∞—Ä–Ω—ã–µ –º–µ—Ä—ã, –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—â–∏–µ –ø–æ—Ä—è–¥–æ–∫, –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —è–≤–ª—è—é—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–º–∏ –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–º–∏. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –æ—Ç–ª–∏—á–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–æ–π –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –º—ã –ø—ã—Ç–∞–µ–º—Å—è –∏–∑–º–µ—Ä–∏—Ç—å –∏ –æ—Ü–µ–Ω–∏—Ç—å. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ, –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—â–∏–µ –ø–æ—Ä—è–¥–æ–∫ –º–µ—Ä—ã ‚Äî —ç—Ç–æ <strong>HitRate@k</strong>, <strong>Recall@k</strong>, <strong>Precision@k</strong> –∏ <strong>F1@k</strong>.</p>
<h4 id="-hitratek">üéØ <strong>HitRate@K</strong></h4>
<p><strong>HitRate@K</strong> ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–µ–π—à–∞—è –∏–∑ –≤—Å–µ—Ö –º–µ—Ä –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è. –≠—Ç–æ –±–∏–Ω–∞—Ä–Ω–∞—è –º–µ—Ä–∞, —É–∫–∞–∑—ã–≤–∞—é—â–∞—è, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ç–æ–ø-k –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ö –∏–ª–∏ –Ω–µ—Ç. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –æ–Ω –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è: –ª–∏–±–æ 1 (–µ—Å–ª–∏ –≤ –∏–∑–≤–ª–µ—á—ë–Ω–Ω–æ–º –Ω–∞–±–æ—Ä–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç), –ª–∏–±–æ 0 (–µ—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –∏–∑ –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º).</p>
<h4 id="-recallk">üéØ <strong>Recall@K</strong></h4>
<p><strong>Recall@K</strong> –≤—ã—Ä–∞–∂–∞–µ—Ç, –∫–∞–∫ —á–∞—Å—Ç–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Ç–æ–ø-k –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö. –ü–æ —Å—É—Ç–∏, –æ–Ω –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–æ –Ω–∞–º —É–¥–∞–ª–æ—Å—å –∏–∑–±–µ–∂–∞—Ç—å –ª–æ–∂–Ω—ã—Ö –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. <strong>Recall@k</strong> —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<h4 id="-precisionk">üéØ <strong>Precision@k</strong></h4>
<p><strong>Precision@k</strong> —É–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –∏–∑ —Ç–æ–ø-k –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã. –ü–æ —Å—É—Ç–∏, –æ–Ω –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–æ –Ω–∞–º —É–¥–∞–ª–æ—Å—å –∏–∑–±–µ–∂–∞—Ç—å –ª–æ–∂–Ω—ã—Ö –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. <strong>Precision@k</strong> –º–æ–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<h4 id="-f1k">üéØ <strong>F1@K</strong></h4>
<p>–ù–æ —á—Ç–æ, –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω—ã –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, —Ç–∞–∫ –∏ –ø–æ–ª–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî —á—Ç–æ, –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–µ–Ω –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–π –Ω–∞–±–æ—Ä, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤—ã—Å–æ–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–∞–∫ Recall, —Ç–∞–∫ –∏ Precision? –ß—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å —ç—Ç–æ–≥–æ, Recall@K –∏ Precision@K –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –µ–¥–∏–Ω—É—é –º–µ—Ä—É, –Ω–∞–∑—ã–≤–∞–µ–º—É—é <strong>F1@K</strong>, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º —Å–æ–∑–¥–∞—Ç—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å, –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±–∞–ª–∞–Ω—Å–∏—Ä—É—é—â–∏–π –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å –∏ –ø–æ–ª–Ω–æ—Ç—É –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.</p>
<h3 id="—Ç–∞–∫-—Ö–æ—Ä–æ—à-–ª–∏-–Ω–∞—à-–≤–µ–∫—Ç–æ—Ä–Ω—ã–π-–ø–æ–∏—Å–∫">–¢–∞–∫ —Ö–æ—Ä–æ—à –ª–∏ –Ω–∞—à –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫?</h3>
<p>–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –≤—Å—ë —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ ¬´–í–æ–π–Ω—ã –∏ –º–∏—Ä–∞¬ª, –æ—Ç–≤–µ—Ç–∏–≤ –µ—â—ë —Ä–∞–∑ –Ω–∞ –º–æ–π –ª—é–±–∏–º—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî ¬´–ö—Ç–æ —Ç–∞–∫–∞—è –ê–Ω–Ω–∞ –ü–∞–≤–ª–æ–≤–Ω–∞?¬ª. –ö–∞–∫ –∏ –≤ –º–æ–∏—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ—Å—Ç–∞—Ö, —è —Å–Ω–æ–≤–∞ –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç ¬´–í–æ–π–Ω—ã –∏ –º–∏—Ä–∞¬ª –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞, –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–∫ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ª–µ–≥–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–π —á–µ—Ä–µ–∑ Project Gutenberg.</p>
<h3 id="–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ-–º–µ—Ç—Ä–∏–∫-–æ—Ü–µ–Ω–∫–∏-–∏–∑–≤–ª–µ—á–µ–Ω–∏—è">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –æ—Ü–µ–Ω–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è</h3>
<p>–í –Ω–∞—á–∞–ª–µ –Ω–∞—à–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –º—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –æ—Ü–µ–Ω–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">normalize_text</span>(text):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">.</span>join(text<span style="color:#f92672">.</span>lower()<span style="color:#f92672">.</span>split())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">hit_rate_at_k</span>(retrieved_docs, ground_truth_texts, k):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> doc <span style="color:#f92672">in</span> retrieved_docs[:k]:
</span></span><span style="display:flex;"><span>        doc_norm <span style="color:#f92672">=</span> normalize_text(doc<span style="color:#f92672">.</span>page_content)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> any(normalize_text(gt) <span style="color:#f92672">in</span> doc_norm <span style="color:#f92672">or</span> doc_norm <span style="color:#f92672">in</span> normalize_text(gt) <span style="color:#66d9ef">for</span> gt <span style="color:#f92672">in</span> ground_truth_texts):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">precision_at_k</span>(retrieved_docs, ground_truth_texts, k):
</span></span><span style="display:flex;"><span>    hits <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> doc <span style="color:#f92672">in</span> retrieved_docs[:k]:
</span></span><span style="display:flex;"><span>        doc_norm <span style="color:#f92672">=</span> normalize_text(doc<span style="color:#f92672">.</span>page_content)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> any(normalize_text(gt) <span style="color:#f92672">in</span> doc_norm <span style="color:#f92672">or</span> doc_norm <span style="color:#f92672">in</span> normalize_text(gt) <span style="color:#66d9ef">for</span> gt <span style="color:#f92672">in</span> ground_truth_texts):
</span></span><span style="display:flex;"><span>            hits <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> hits <span style="color:#f92672">/</span> k
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">recall_at_k</span>(retrieved_docs, ground_truth_texts, k):
</span></span><span style="display:flex;"><span>    matched <span style="color:#f92672">=</span> set()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i, gt <span style="color:#f92672">in</span> enumerate(ground_truth_texts):
</span></span><span style="display:flex;"><span>        gt_norm <span style="color:#f92672">=</span> normalize_text(gt)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> doc <span style="color:#f92672">in</span> retrieved_docs[:k]:
</span></span><span style="display:flex;"><span>            doc_norm <span style="color:#f92672">=</span> normalize_text(doc<span style="color:#f92672">.</span>page_content)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> gt_norm <span style="color:#f92672">in</span> doc_norm <span style="color:#f92672">or</span> doc_norm <span style="color:#f92672">in</span> gt_norm:
</span></span><span style="display:flex;"><span>                matched<span style="color:#f92672">.</span>add(i)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> len(matched) <span style="color:#f92672">/</span> len(ground_truth_texts) <span style="color:#66d9ef">if</span> ground_truth_texts <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">f1_at_k</span>(precision, recall):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> precision <span style="color:#f92672">*</span> recall <span style="color:#f92672">/</span> (precision <span style="color:#f92672">+</span> recall) <span style="color:#66d9ef">if</span> (precision <span style="color:#f92672">+</span> recall) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span>
</span></span></code></pre></div><p>–ß—Ç–æ–±—ã —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ª—é–±—É—é –∏–∑ —ç—Ç–∏—Ö –æ—Ü–µ–Ω–æ—á–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫, –Ω–∞–º –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–±–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–º –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã. –≠—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –æ–±—ä—ë–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞; –ø–æ—ç—Ç–æ–º—É —è –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é –ø—Ä–æ—Ü–µ—Å—Å —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ ‚Äî ¬´–ö—Ç–æ —Ç–∞–∫–∞—è –ê–Ω–Ω–∞ –ü–∞–≤–ª–æ–≤–Ω–∞?¬ª ‚Äî –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω—ã.</p>
<p>–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Äî –ª–∏–±–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –ª–∏–±–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –æ—Ü–µ–Ω–æ–∫ ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –≤–∏–¥–µ <strong>—Å–ª–æ–≤–∞—Ä—è –∏—Å—Ç–∏–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</strong>, –ø–æ–∑–≤–æ–ª—è—é—â–µ–≥–æ –Ω–∞–º —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏.</p>
<p>–í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –º—ã –º–æ–∂–µ–º —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã –≤ —Å–ª–æ–≤–∞—Ä—å –∏—Å—Ç–∏–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –Ω–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ ¬´–ö—Ç–æ —Ç–∞–∫–∞—è –ê–Ω–Ω–∞ –ü–∞–≤–ª–æ–≤–Ω–∞?¬ª, —è–≤–ª—è—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ:</p>
<ol>
<li>¬´–≠—Ç–æ –±—ã–ª–æ –≤ –∏—é–ª–µ 1805 –≥–æ–¥–∞, –∏ –æ—Ä–∞—Ç–æ—Ä–æ–º –±—ã–ª–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ê–Ω–Ω–∞ –ü–∞–≤–ª–æ–≤–Ω–∞ –®–µ—Ä–µ—Ä, —Ñ—Ä–µ–π–ª–∏–Ω–∞ –∏ –ª—é–±–∏–º–∏—Ü–∞ –∏–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü—ã –ú–∞—Ä–∏–∏ –§—ë–¥–æ—Ä–æ–≤–Ω—ã. –° —ç—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ –æ–Ω–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –∫–Ω—è–∑—è –í–∞—Å–∏–ª–∏—è –ö—É—Ä–∞–≥–∏–Ω–∞, —á–µ–ª–æ–≤–µ–∫–∞ –≤—ã—Å–æ–∫–æ–≥–æ —Ä–∞–Ω–≥–∞ –∏ –≤–∞–∂–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–≤—ã–º –ø—Ä–∏–±—ã–ª –Ω–∞ –µ—ë –ø—Ä–∏—ë–º. –£ –ê–Ω–Ω—ã –ü–∞–≤–ª–æ–≤–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –±—ã–ª –∫–∞—à–µ–ª—å. –û–Ω–∞, –∫–∞–∫ —Å–∫–∞–∑–∞–ª–∞, –±–æ–ª–µ–ª–∞ –≥—Ä–∏–ø–ø–æ–º; –≥—Ä–∏–ø–ø —Ç–æ–≥–¥–∞ –±—ã–ª –Ω–æ–≤—ã–º —Å–ª–æ–≤–æ–º –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º —Ç–æ–ª—å–∫–æ —ç–ª–∏—Ç–æ–π. –í—Å–µ –µ—ë –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –ø–æ-—Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏ –∏ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –ª–∞–∫–µ–µ–º –≤ –∞–ª–æ–π –ª–∏–≤—Ä–µ–µ –≤ —Ç–æ —É—Ç—Ä–æ, –≤—ã–≥–ª—è–¥–µ–ª–∏ —Ç–∞–∫: ‚Äû–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ, –≥—Ä–∞—Ñ (–∏–ª–∏ –∫–Ω—è–∑—å), –∏ –µ—Å–ª–∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤–µ—á–µ—Ä —Å –±–µ–¥–Ω–æ–π –±–æ–ª—å–Ω–æ–π –Ω–µ —Å–ª–∏—à–∫–æ–º —É–∂–∞—Å–Ω–∞, —è –±—É–¥—É –æ—á–µ–Ω—å —Ä–∞–¥–∞ –≤–∏–¥–µ—Ç—å –≤–∞—Å —Å–µ–≥–æ–¥–Ω—è –º–µ–∂–¥—É 7 –∏ 10 ‚Äî –ê–Ω–Ω–µ—Ç –®–µ—Ä–µ—Ä‚Äú¬ª.</li>
<li>¬´–ü—Ä–∏—ë–º –ê–Ω–Ω—ã –ü–∞–≤–ª–æ–≤–Ω—ã –±—ã–ª –ø–æ—Ö–æ–∂ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π, —Ç–æ–ª—å–∫–æ –Ω–æ–≤–∏–Ω–∫–æ–π, –∫–æ—Ç–æ—Ä—É—é –æ–Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∞ —Å–≤–æ–∏–º –≥–æ—Å—Ç—è–º –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑, –±—ã–ª –Ω–µ –ú–æ—Ä—Ç–µ–º–∞—Ä—Ç, –∞ –¥–∏–ø–ª–æ–º–∞—Ç –∏–∑ –ë–µ—Ä–ª–∏–Ω–∞ —Å —Å–∞–º—ã–º–∏ —Å–≤–µ–∂–∏–º–∏ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ –æ –≤–∏–∑–∏—Ç–µ –∏–º–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –≤ –ü–æ—Ç—Å–¥–∞–º –∏ –æ —Ç–æ–º, –∫–∞–∫ –¥–≤–∞ –∞–≤–≥—É—Å—Ç–µ–π—à–∏—Ö –¥—Ä—É–≥–∞ –ø–æ–∫–ª—è–ª–∏—Å—å –≤ –Ω–µ—Ä–∞–∑—Ä—ã–≤–Ω–æ–º —Å–æ—é–∑–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥–µ–ª–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏ –ø—Ä–æ—Ç–∏–≤ –≤—Ä–∞–≥–∞ —Ä–æ–¥–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ. –ê–Ω–Ω–∞ –ü–∞–≤–ª–æ–≤–Ω–∞ –ø—Ä–∏–Ω—è–ª–∞ –ü—å–µ—Ä–∞ —Å –æ—Ç—Ç–µ–Ω–∫–æ–º –º–µ–ª–∞–Ω—Ö–æ–ª–∏–∏, –æ—á–µ–≤–∏–¥–Ω–æ –æ—Ç–Ω–æ—Å—è—â–∏–º—Å—è –∫ –Ω–µ–¥–∞–≤–Ω–µ–π –ø–æ—Ç–µ—Ä–µ –º–æ–ª–æ–¥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ —Å–º–µ—Ä—Ç—å—é –≥—Ä–∞—Ñ–∞ –ë–µ–∑—É—Ö–æ–≤–∞ (–≤—Å–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å—á–∏—Ç–∞–ª–∏ —Å–≤–æ–∏–º –¥–æ–ª–≥–æ–º –∑–∞–≤–µ—Ä–∏—Ç—å –ü—å–µ—Ä–∞, —á—Ç–æ –æ–Ω –±—ã–ª –≥–ª—É–±–æ–∫–æ –æ–≥–æ—Ä—á—ë–Ω —Å–º–µ—Ä—Ç—å—é –æ—Ç—Ü–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –µ–¥–≤–∞ –∑–Ω–∞–ª), –∏ –µ—ë –º–µ–ª–∞–Ω—Ö–æ–ª–∏—è –±—ã–ª–∞ —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –∞–≤–≥—É—Å—Ç–µ–π—à–∞—è –º–µ–ª–∞–Ω—Ö–æ–ª–∏—è, –∫–æ—Ç–æ—Ä—É—é –æ–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –ø—Ä–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–∏ –µ—ë –∞–≤–≥—É—Å—Ç–µ–π—à–µ–≥–æ –í–µ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü—ã –ú–∞—Ä–∏–∏ –§—ë–¥–æ—Ä–æ–≤–Ω—ã. –ü—å–µ—Ä –±—ã–ª –ø–æ–ª—å—â—ë–Ω —ç—Ç–∏–º. –ê–Ω–Ω–∞ –ü–∞–≤–ª–æ–≤–Ω–∞ —É—Å—Ç—Ä–æ–∏–ª–∞ —Ä–∞–∑–Ω—ã–µ –≥—Ä—É–ø–ø—ã –≤ —Å–≤–æ–µ–π –≥–æ—Å—Ç–∏–Ω–æ–π —Å–æ —Å–≤–æ–∏–º –æ–±—ã—á–Ω—ã–º –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ–º¬ª.</li>
<li>¬´–ì–æ—Å—Ç–∏–Ω–∞—è —Å –µ—ë –æ–±—ã—á–Ω—ã–º –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ–º. –ë–æ–ª—å—à–∞—è –≥—Ä—É–ø–ø–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—ã–ª–∏ –ø—Ä–∏–Ω—Ü –í–∞—Å–∏–ª–∏–π –∏ –≥–µ–Ω–µ—Ä–∞–ª—ã, –ø–æ–ª—É—á–∏–ª–∞ –ø–æ–ª—å–∑—É –æ—Ç –¥–∏–ø–ª–æ–º–∞—Ç–∞. –î—Ä—É–≥–∞—è –≥—Ä—É–ø–ø–∞ –±—ã–ª–∞ –∑–∞ —á–∞–π–Ω—ã–º —Å—Ç–æ–ª–æ–º. –ü—å–µ—Ä —Ö–æ—Ç–µ–ª –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –ø–µ—Ä–≤–æ–π, –Ω–æ –ê–Ω–Ω–∞ –ü–∞–≤–ª–æ–≤–Ω–∞ ‚Äî –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –≤ –≤–æ–∑–±—É–∂–¥—ë–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∏—Ä –Ω–∞ –ø–æ–ª–µ –±–æ—è, –≤ –≥–æ–ª–æ–≤–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã—Å—è—á–∏ –Ω–æ–≤—ã—Ö –∏ –±–ª–µ—Å—Ç—è—â–∏—Ö –∏–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –µ–¥–≤–∞ –ª–∏ —É—Å–ø–µ–≤–∞—é—Ç –≤–æ–ø–ª–æ—Ç–∏—Ç—å –≤ –∂–∏–∑–Ω—å, ‚Äî —É–≤–∏–¥–µ–≤ –ü—å–µ—Ä–∞, –∫–æ—Å–Ω—É–ª–∞—Å—å –µ–≥–æ —Ä—É–∫–∞–≤–∞ –ø–∞–ª—å—Ü–µ–º, –≥–æ–≤–æ—Ä—è:¬ª</li>
</ol>
<p>–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã –º–æ–∂–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ç–∏–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å, —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Who is Anna P√°vlovna?&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ground_truth_texts <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;It was in July, 1805, and the speaker was the well-known Anna P√°vlovna Sch√©rer, maid of honor and favorite of the Empress M√°rya F√´dorovna. With these words she greeted Prince Vas√≠li Kur√°gin, a man of high rank and importance, who was the first to arrive at her reception. Anna P√°vlovna had had a cough for some days. She was, as she said, suffering from la grippe; grippe being then a new word in St. Petersburg, used only by the elite. All her invitations without exception, written in French, and delivered by a scarlet-liveried footman that morning, ran as follows: ‚ÄúIf you have nothing better to do, Count (or Prince), and if the prospect of spending an evening with a poor invalid is not too terrible, I shall be very charmed to see you tonight between 7 and 10 ‚Äî Annette Sch√©rer.‚Äù&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Anna P√°vlovna‚Äôs ‚ÄúAt Home‚Äù was like the former one, only the novelty she offered her guests this time was not Mortemart, but a diplomatist fresh from Berlin with the very latest details of the Emperor Alexander‚Äôs visit to Potsdam, and of how the two august friends had pledged themselves in an indissoluble alliance to uphold the cause of justice against the enemy of the human race. Anna P√°vlovna received Pierre with a shade of melancholy, evidently relating to the young man‚Äôs recent loss by the death of Count Bez√∫khov (everyone constantly considered it a duty to assure Pierre that he was greatly afflicted by the death of the father he had hardly known), and her melancholy was just like the august melancholy she showed at the mention of her most august Majesty the Empress M√°rya F√´dorovna. Pierre felt flattered by this. Anna P√°vlovna arranged the different groups in her drawing room with her habitual skill. The large group, in which were&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;drawing room with her habitual skill. The large group, in which were Prince Vas√≠li and the generals, had the benefit of the diplomat. Another group was at the tea table. Pierre wished to join the former, but Anna P√°vlovna‚Äîwho was in the excited condition of a commander on a battlefield to whom thousands of new and brilliant ideas occur which there is hardly time to put in action‚Äîseeing Pierre, touched his sleeve with her finger, saying:&#34;</span>
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>–ù–∞–∫–æ–Ω–µ—Ü, –º—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª –≤ –Ω–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é <code>main()</code>, —á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ—Ü–µ–Ω–æ—á–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>k_ <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>D, I <span style="color:#f92672">=</span> index<span style="color:#f92672">.</span>search(query_embedding, k<span style="color:#f92672">=</span>k_)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>relevant_docs <span style="color:#f92672">=</span> [vector_store<span style="color:#f92672">.</span>docstore[i] <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> I[<span style="color:#ae81ff">0</span>]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>reranked_docs, reranked_scores <span style="color:#f92672">=</span> rerank_with_cross_encoder(user_input, relevant_docs)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>top_k_docs <span style="color:#f92672">=</span> reranked_docs[:k_]  
</span></span><span style="display:flex;"><span>precision <span style="color:#f92672">=</span> precision_at_k(top_k_docs, ground_truth_texts, k<span style="color:#f92672">=</span>k_)
</span></span><span style="display:flex;"><span>recall <span style="color:#f92672">=</span> recall_at_k(top_k_docs, ground_truth_texts, k<span style="color:#f92672">=</span>k_)
</span></span><span style="display:flex;"><span>f1 <span style="color:#f92672">=</span> f1_at_k(precision, recall)
</span></span><span style="display:flex;"><span>hit <span style="color:#f92672">=</span> hit_rate_at_k(top_k_docs, ground_truth_texts, k<span style="color:#f92672">=</span>k_)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">--- Retrieval Evaluation Metrics ---&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Hit@6: </span><span style="color:#e6db74">{</span>hit<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Precision@6: </span><span style="color:#e6db74">{</span>precision<span style="color:#e6db74">:</span><span style="color:#e6db74">.2f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Recall@6: </span><span style="color:#e6db74">{</span>recall<span style="color:#e6db74">:</span><span style="color:#e6db74">.2f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;F1@6: </span><span style="color:#e6db74">{</span>f1<span style="color:#e6db74">:</span><span style="color:#e6db74">.2f</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;-&#34;</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">40</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">...</span>
</span></span></code></pre></div><p>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º –æ—Ü–µ–Ω–∫—É <strong>–ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è</strong>. –ü–æ—Å–∫–æ–ª—å–∫—É –º–µ—Ç—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º ‚Äî —Ç–∞–∫–∏–µ –∫–∞–∫ Precision@K, Recall@K –∏ F1@K ‚Äî <strong>–Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç –ø–æ—Ä—è–¥–æ–∫</strong>, –æ—Ü–µ–Ω–∫–∞ –∏—Ö –Ω–∞ —Ç–æ–ø-k –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ö –¥–æ –∏–ª–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—ë—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –µ—Å–ª–∏ –Ω–∞–±–æ—Ä —Ç–æ–ø-k —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—Å—Ç–∞—ë—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º.</p>
<p>–ò—Ç–∞–∫, –¥–ª—è –Ω–∞—à–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ ¬´–ö—Ç–æ —Ç–∞–∫–∞—è –ê–Ω–Ω–∞ –ü–∞–≤–ª–æ–≤–Ω–∞?¬ª –∏ @k = 10 –º—ã –ø–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–µ –æ—Ü–µ–Ω–∫–∏:</p>
<ul>
<li>@k = 10, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ –æ—Ü–µ–Ω–æ—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ —Ç–æ–ø-10 –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ö.</li>
<li>Hit@10 = True, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö (–∏—Å—Ç–∏–Ω–Ω—ã—Ö) —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –±—ã–ª –Ω–∞–π–¥–µ–Ω –≤ —Ç–æ–ø-10 –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ö.</li>
<li>Precision@10 = 0,20, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏–∑ 10 –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ —Ç–æ–ª—å–∫–æ 2 –±—ã–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ (0,20 = 2/10). –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –∏—Å–∫–∞—Ç–µ–ª—å —Ç–∞–∫–∂–µ –ø—Ä–∏–Ω—ë—Å –Ω–µ–Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é; —Ç–æ–ª—å–∫–æ 20% –∏–∑ —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω –∏–∑–≤–ª—ë–∫, –±—ã–ª–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª–µ–∑–Ω–æ.</li>
<li>Recall@10 = 0,67, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –∏–∑–≤–ª–µ–∫–ª–∏ 67% –≤—Å–µ—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ –∏—Å—Ç–∏–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≤ —Ç–æ–ø-10 –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö.</li>
<li>F1@10 = 0,31, —á—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ–±—â–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è, —Å–æ—á–µ—Ç–∞—é—â–µ–µ –∫–∞–∫ —Ç–æ—á–Ω–æ—Å—Ç—å, —Ç–∞–∫ –∏ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å. –û—Ü–µ–Ω–∫–∞ F1 –≤ 0,31 —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —É–º–µ—Ä–µ–Ω–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∏ –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –ø—Ä–∏–ª–∏—á–Ω–æ–π –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å—é, –Ω–æ –Ω–∏–∑–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é.</li>
</ul>
<p>–ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ, –º—ã –º–æ–∂–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —ç—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –ª—é–±–æ–≥–æ k ‚Äî –∏–º–µ–µ—Ç —Å–º—ã—Å–ª —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π k, –ø—Ä–µ–≤—ã—à–∞—é—â–∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å –≤ –∏—Å—Ç–∏–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã –º–æ–∂–µ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ k –∏ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ –Ω–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –º–µ—Ä–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏–ª–∏ —Å—É–∂–µ–Ω–∏—è –æ–±–ª–∞—Å—Ç–∏ –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.</p>
<h3 id="–≤-–∑–∞–∫–ª—é—á–µ–Ω–∏–µ">–í –∑–∞–∫–ª—é—á–µ–Ω–∏–µ</h3>
<p>–ü–æ–∫–∞ —Ç–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏, –∫–∞–∫ Precision@K, Recall@K –∏ F1@K, –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω—ã –¥–ª—è <strong>–æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞</strong> –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ (–∫–∞–∫ –º—ã —ç—Ç–æ —Å–¥–µ–ª–∞–ª–∏ –∑–¥–µ—Å—å), –≤ —Ä–µ–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–µ –æ–Ω–∏ –æ–±—ã—á–Ω–æ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç—Å—è –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –∏–∑–≤–µ—Å—Ç–Ω–æ–π –∫–∞–∫ —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä. –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ, –∫–∞–∂–¥–æ–º—É –∑–∞–ø—Ä–æ—Å—É –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –Ω–∞–±–æ—Ä–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–≤–æ–π –Ω–∞–±–æ—Ä —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∏—Å—Ç–∏–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ú—ã –∑–∞—Ç–µ–º —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –∞ –∑–∞—Ç–µ–º —É—Å—Ä–µ–¥–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º.</p>
<p>–í –∫–æ–Ω–µ—á–Ω–æ–º —Å—á—ë—Ç–µ, –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ RAG. –°–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –∏–∑–≤–ª–µ—á–µ–Ω–∏—è ‚Äî –ø–æ–∏—Å–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚Äî —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ RAG.</p>

    </div>

    <div class="tags mt-8">
      

    </div>
  </article>

          
            
  </main>          

    <script>

        
        
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const sidebar = document.querySelector('.sidebar');
        
        mobileMenuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });
        
        
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.5
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const id = entry.target.getAttribute('id');
                if (entry.isIntersecting) {
                    document.querySelectorAll(`.toc-link[href="#${id}"]`).forEach(link => {
                        link.classList.add('active');
                    });
                } else {
                    document.querySelectorAll(`.toc-link[href="#${id}"]`).forEach(link => {
                        link.classList.remove('active');
                    });
                }
            });
        }, observerOptions);
        
        
        document.querySelectorAll('h2[id]').forEach(heading => {
            observer.observe(heading);
        });
    </script>


  <footer class="px-6 py-12 bg-sky-950 text-white/50">
    
<p>P9X.ru 2010 - 2025–≥. —É—Å–ª—É–≥–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞</p>

<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105149615', 'ym');

    ym(105149615, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105149615" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

  </footer>
</body>
</html>
